<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>data-viz.html</title>
  <meta name="generator" content="Haroopad 0.13.1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF);background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:5px -27px no-repeat #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:#FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:#EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:#75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:1px solid #1A3C6C;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin:0;max-width:none;min-height:0;outline:#112644 0;overflow-x:visible;overflow-y:visible;padding:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}.mermaid .label{color:#333}.node circle,.node polygon,.node rect{fill:#cde498;stroke:#13540c;stroke-width:1px}.edgePath .path{stroke:green;stroke-width:1.5px}.cluster rect{fill:#cdffb2;rx:40;stroke:#6eaa49;stroke-width:1px}.cluster text{fill:#333}.actor{stroke:#13540c;fill:#cde498}text.actor{fill:#000;stroke:none}.actor-line{stroke:grey}.messageLine0{stroke-width:1.5;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#333}.messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#arrowhead{fill:#333}#crosshead path{fill:#333!important;stroke:#333!important}.messageText{fill:#333;stroke:none}.labelBox{stroke:#326932;fill:#cde498}.labelText,.loopText{fill:#000;stroke:none}.loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#326932}.note{stroke:#6eaa49;fill:#fff5ad}.noteText{fill:#000;stroke:none;font-family:'trebuchet ms',verdana,arial;font-size:14px}.section{stroke:none;opacity:.2}.section0,.section2{fill:#6eaa49}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:#333}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:lightgrey;opacity:.3;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:red;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle;font-size:11px}.taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:#487e3a;stroke:#13540c}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:#000}.active0,.active1,.active2,.active3{fill:#cde498;stroke:#13540c}.activeText0,.activeText1,.activeText2,.activeText3{fill:#000!important}.done0,.done1,.done2,.done3{stroke:grey;fill:lightgrey;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:#000!important}.crit0,.crit1,.crit2,.crit3{stroke:#f88;fill:red;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#f88;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:#000!important}.titleText{text-anchor:middle;font-size:18px;fill:#000}text{font-family:'trebuchet ms',verdana,arial;font-size:14px}html{height:100%}body{margin:0!important;padding:5px 20px 26px!important;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x;border:0;height:3px;padding:0}hr.underscore{border-top-style:dashed!important}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:url(../img/ajax.gif) center center no-repeat #fff}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}p.toc{margin:0!important}p.toc ul{padding-left:10px}p.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}p.toc li,p.toc ul{list-style-type:none}p.toc li{width:100%;padding:0;overflow:hidden}p.toc li a::after{content:"."}p.toc li a:before{content:"• "}p.toc h5{text-transform:uppercase}p.toc .title{float:left;padding-right:3px}p.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}input.task-list-item{margin-left:-1.62em}.markdown{font-family:"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Lucida Grande","Lucida Sans Unicode","Lucida Sans",'Segoe UI',AppleSDGothicNeo-Medium,'Malgun Gothic',Verdana,Tahoma,sans-serif;padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-wrap:break-word}.markdown pre{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;overflow:auto;padding:.5em}.markdown pre code{border:0;display:block}.markdown pre>code{font-family:Consolas,Inconsolata,Courier,monospace;font-weight:700;white-space:pre;margin:0}.markdown code{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown mark{color:#000;background-color:#fcf8e3}.markdown table{padding:0;border-collapse:collapse;border-spacing:0;margin-bottom:16px}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.github{padding:20px;font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Segoe UI",AppleSDGothicNeo-Medium,'Malgun Gothic',Arial,freesans,sans-serif;font-size:15px;background:#fff;line-height:1.6;-webkit-font-smoothing:antialiased}.github a{color:#3269a0}.github a:hover{color:#4183c4}.github h2{border-bottom:1px solid #e6e6e6;line-height:1.6}.github h6{color:#777}.github hr{border:1px solid #e6e6e6}.github pre>code{font-size:.9em;font-family:Consolas,Inconsolata,Courier,monospace}.github blockquote>code,.github h1>code,.github h2>code,.github h3>code,.github h4>code,.github h5>code,.github h6>code,.github li>code,.github p>code,.github td>code{background-color:rgba(0,0,0,.07);font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:85%;padding:.2em .5em;border:0}.github blockquote{border-left:4px solid #e6e6e6;padding:0 15px;font-style:italic}.github table{background-color:#fafafa}.github table tr td,.github table tr th{border:1px solid #e6e6e6}.github table tr:nth-child(2n){background-color:#f2f2f2}.hljs{display:block;overflow-x:auto;padding:.5em;background:#fdf6e3;color:#657b83;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment,.hljs-doctype,.hljs-javadoc,.hljs-pi,.lisp .hljs-string{color:#93a1a1}.css .hljs-tag,.hljs-addition,.hljs-keyword,.hljs-request,.hljs-status,.hljs-winutils,.method,.nginx .hljs-title{color:#859900}.hljs-command,.hljs-dartdoc,.hljs-hexcolor,.hljs-link_url,.hljs-number,.hljs-phpdoc,.hljs-regexp,.hljs-rules .hljs-value,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#2aa198}.css .hljs-function,.hljs-built_in,.hljs-chunk,.hljs-decorator,.hljs-id,.hljs-identifier,.hljs-localvars,.hljs-title,.vhdl .hljs-literal{color:#268bd2}.hljs-attribute,.hljs-class .hljs-title,.hljs-constant,.hljs-link_reference,.hljs-parent,.hljs-type,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number{color:#b58900}.css .hljs-pseudo,.diff .hljs-change,.hljs-attr_selector,.hljs-cdata,.hljs-header,.hljs-pragma,.hljs-preprocessor,.hljs-preprocessor .hljs-keyword,.hljs-shebang,.hljs-special,.hljs-subst,.hljs-symbol,.hljs-symbol .hljs-string{color:#cb4b16}.hljs-deletion,.hljs-important{color:#dc322f}.hljs-link_label{color:#6c71c4}.tex .hljs-formula{background:#eee8d5}.MathJax_Hover_Frame{border-radius:.25em;-webkit-border-radius:.25em;-moz-border-radius:.25em;-khtml-border-radius:.25em;box-shadow:0 0 15px #83A;-webkit-box-shadow:0 0 15px #83A;-moz-box-shadow:0 0 15px #83A;-khtml-box-shadow:0 0 15px #83A;border:1px solid #A6D!important;display:inline-block;position:absolute}.MathJax_Hover_Arrow{position:absolute;width:15px;height:11px;cursor:pointer}#MathJax_About{position:fixed;left:50%;width:auto;text-align:center;border:3px outset;padding:1em 2em;background-color:#DDD;color:#000;cursor:default;font-family:message-box;font-size:120%;font-style:normal;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:15px;-webkit-border-radius:15px;-moz-border-radius:15px;-khtml-border-radius:15px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_Menu{position:absolute;background-color:#fff;color:#000;width:auto;padding:5px 0;border:1px solid #CCC;margin:0;cursor:default;font:menu;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px;-khtml-border-radius:5px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_MenuItem{padding:1px 2em;background:0 0}.MathJax_MenuArrow{position:absolute;right:.5em;color:#666}.MathJax_MenuActive .MathJax_MenuArrow{color:#fff}.MathJax_MenuArrow.RTL{left:.5em;right:auto}.MathJax_MenuCheck{position:absolute;left:.7em}.MathJax_MenuCheck.RTL{right:.7em;left:auto}.MathJax_MenuRadioCheck{position:absolute;left:.7em}.MathJax_MenuRadioCheck.RTL{right:.7em;left:auto}.MathJax_MenuLabel{padding:1px 2em 3px 1.33em;font-style:italic}.MathJax_MenuRule{border-top:1px solid #DDD;margin:4px 3px}.MathJax_MenuDisabled{color:GrayText}.MathJax_MenuActive{background-color:#606872;color:#fff}.MathJax_Menu_Close{position:absolute;width:31px;height:31px;top:-15px;left:-15px}#MathJax_Zoom{position:absolute;background-color:#F0F0F0;overflow:auto;display:block;z-index:301;padding:.5em;border:1px solid #000;margin:0;font-weight:400;font-style:normal;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;box-shadow:5px 5px 15px #AAA;-webkit-box-shadow:5px 5px 15px #AAA;-moz-box-shadow:5px 5px 15px #AAA;-khtml-box-shadow:5px 5px 15px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}#MathJax_ZoomOverlay{position:absolute;left:0;top:0;z-index:300;display:inline-block;width:100%;height:100%;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_ZoomFrame{position:relative;display:inline-block;height:0;width:0}#MathJax_ZoomEventTrap{position:absolute;left:0;top:0;z-index:302;display:inline-block;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}.MathJax_Preview{color:#888}#MathJax_Message{position:fixed;left:1px;bottom:2px;background-color:#E6E6E6;border:1px solid #959595;margin:0;padding:2px 8px;z-index:102;color:#000;font-size:80%;width:auto;white-space:nowrap}#MathJax_MSIE_Frame{position:absolute;top:0;left:0;width:0;z-index:101;border:0;margin:0;padding:0}.MathJax_Error{color:#C00;font-style:italic}.MathJax_Display{text-align:center;margin:1em 0;position:relative;display:block!important;text-indent:0;max-width:none;max-height:none;min-width:0;min-height:0;width:100%}.MathJax .merror{background-color:#FF8;color:#C00;border:1px solid #C00;padding:1px 3px;font-style:normal;font-size:90%}.MathJax .MJX-monospace{font-family:monospace}.MathJax .MJX-sans-serif{font-family:sans-serif}#MathJax_Tooltip{background-color:InfoBackground;color:InfoText;border:1px solid #000;box-shadow:2px 2px 5px #AAA;-webkit-box-shadow:2px 2px 5px #AAA;-moz-box-shadow:2px 2px 5px #AAA;-khtml-box-shadow:2px 2px 5px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true');padding:3px 4px;z-index:401;position:absolute;left:0;top:0;width:auto;height:auto;display:none}.MathJax{display:inline;font-style:normal;font-weight:400;line-height:normal;font-size:100%;font-size-adjust:none;text-indent:0;text-align:left;text-transform:none;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;direction:ltr;max-width:none;max-height:none;min-width:0;min-height:0;border:0;padding:0;margin:0}.MathJax a,.MathJax img,.MathJax nobr{border:0;padding:0;margin:0;max-width:5000em;max-height:5000em;min-width:0;min-height:0;vertical-align:0;line-height:normal;text-decoration:none}img.MathJax_strut{border:0!important;padding:0!important;margin:0!important;vertical-align:0!important}.MathJax span{display:inline;position:static;border:0;padding:0;margin:0;vertical-align:0;line-height:normal;text-decoration:none}.MathJax nobr{white-space:nowrap!important}.MathJax img{display:inline!important;float:none!important}.MathJax *{transition:none;-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none}.MathJax_Processing{visibility:hidden;position:fixed;width:0;height:0;overflow:hidden}.MathJax_Processed{display:none!important}.MathJax_ExBox{display:block!important;overflow:hidden;width:1px;height:60ex;min-height:0;max-height:none}.MathJax .MathJax_EmBox{display:block!important;overflow:hidden;width:1px;height:60em;min-height:0;max-height:none}.MathJax .MathJax_HitBox{cursor:text;background:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_Tooltip *,.MathJax .MathJax_HitBox *{filter:none;opacity:1;background:0 0}@font-face{font-family:MathJax_Blank;src:url(about:blank)}.MathJax .noError{font-size:90%;text-align:left;color:#000;padding:1px 3px;border:1px solid}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown github">
<h1 id="data-visualization"><a name="data-visualization" href="#data-visualization"></a>Data visualization</h1><p>Visualizing data is a good way to communicate complex information, because we are highly visual animals, evolved to spot patterns and make visual comparisons. To visualize effectively, however, it helps to understand a little about how our brains process visual information.</p><h3 id="design-for-the-human-brain"><a name="design-for-the-human-brain" href="#design-for-the-human-brain"></a>Design for the human brain</h3><p>Whenever we visualize, we are encoding data using visual cues, or “mapping” data onto variation in size, shape or color, and so on. There are various ways of doing this, as this primer illustrates:</p><p><img src="img/dataviz_1.jpg" alt=""></p><p>These cues are not created equal, however. In the mid-1980s, statisticians William Cleveland and Robert McGill <a href="http://courses.ischool.berkeley.edu/i247/f05/readings/Cleveland_GraphicalPerception_Science85.pdf">ran some experiments</a> with human volunteers, measuring how accurately they were able to estimate the numbers encoded by different visual cues. This is what they found:</p><p><img src="img/dataviz_2.jpg" alt=""></p><p>The position of points on an aligned scale is perceived with similar accuracy to the length of a line — we don’t need to see a solid line to accurately read the distance between an axis, and a point on a scatter plot.</p><p>This perceptual hierarchy of visual cues is very important. When making comparisons with continuous variables, aim to use cues near the top of the scale wherever possible.</p><p>Look at the following visual encodings of the same simple dataset. Do the bars or the circles make it easiest to “read” the numerical values that are encoded?</p><p><img src="img/dataviz_3.jpg" alt=""></p><h3 id="but-this-doesn't-mean-that-everything-becomes-a-bar-chart"><a name="but-this-doesn't-mean-that-everything-becomes-a-bar-chart" href="#but-this-doesn't-mean-that-everything-becomes-a-bar-chart"></a>But this doesn’t mean that everything becomes a bar chart</h3><p>Length on an aligned scale may be the best option to allow people to compare numbers accurately, but that doesn’t mean the other possibilities are always to be avoided in visualization. Indeed, color hue is a good way of encoding categorical data. The human brain is particularly good at recognizing patterns and differences. This means that variations in color, shape and orientation, while poor for accurately encoding the precise value of continuous variables, can be good choices for representing categorical data.</p><p>You can also combine different visual cues into the same graphic to encode different variables. But always think about the main messages you are trying to impart, and where you can use visual cues near the top of the visual hierarchy to communicate that message most effectively.</p><h4 id="case-study:-immunization-in-california-kindergartens"><a name="case-study:-immunization-in-california-kindergartens" href="#case-study:-immunization-in-california-kindergartens"></a>Case study: Immunization in California kindergartens</h4><p>Now we’ll explore a dataset at different levels of analysis, to show how different visual encodings may be needed for different visualization tasks with the same data.</p><p>This data, from the <a href="https://www.cdph.ca.gov/programs/immunize/Pages/ImmunizationLevels.aspx">California Department of Public Health</a>, gives numbers on immunization and enrollment at kindergartens across the state. The data is provided at the level of individual schools, but can be aggregated to look at counties, or the entire state.</p><p>When looking at change over time at the state level, the perceptual hierarchy makes a column chart a good choice:</p><p><img src="img/dataviz_4.png" alt=""></p><p>Notice that I’ve focused on the percentage of children with <em>incomplete</em> vaccination, rather than the percentage complete, for two reasons: </p><ul>
<li>The differences between the lengths of the bars are greater, and so is easier to read. </li><li>More importantly, incomplete vaccination is what increases the risk of infectious disease outbreaks, which is why we care about this data.</li></ul><p>But bar chart is not the only choice:</p><p>Here’s the same information presented as a line chart:</p><p><img src="img/dataviz_5.png" alt=""></p><p>Notice that here, I haven’t started the Y axis at zero. This would be unforgivable for a bar chart, where the length of the bar <em>is</em> the visual encoding, and so starting at an arbitrary value would distort the comparison between the bars. Here, however, I’m emphasizing the relative slope, to show change over time, so starting at zero is less crucial.</p><p>And here’s the data as a dot-and-line chart:</p><p><img src="img/dataviz_6.png" alt=""></p><p>Here, I’ve returned to a Y axis that starts at zero, so that the relative positions of the points can be compared accurately.</p><p>But what if we want to look at individual counties? When comparing a handful of counties, the dot-and-line chart, combining the visual cues of position on an aligned scale (for the yearly values) and slope (for the rate of change from year to year) works well:</p><p><img src="img/dataviz_7.png" alt=""></p><p>But there are 58 counties in California, and trying to compare them all using a dot-and-line chart results in chaos:</p><p><img src="img/dataviz_8.png" alt=""></p><p>In this case, it makes sense to drop down the perceptual hierarchy, and use the intensity of color to represent the percentage of incomplete immunization:</p><p><img src="img/dataviz_9.png" alt=""></p><p>This type of chart is called a heat map. It provides a quick and easy way to scan for the counties and years with the highest rates of incomplete immunization.</p><h4 id="using-color-effectively"><a name="using-color-effectively" href="#using-color-effectively"></a>Using color effectively</h4><p>Color falls low on the perceptual hierarchy of visual cues, but it is often deployed to highlight particular elements of a chart, and sometimes to encode data values. Poor choice of color schemes is a problem that bedevils many graphics, so it is worth taking some time to consider how to use color to maximum effect.</p><p>It helps to think about colors in terms of the color wheel, which places colors that “harmonize” well together side by side, and arranges those that have strong visual contrast — blue and orange, for instance — at opposite sides of the circle:</p><p><img src="img/dataviz_10.jpg" alt=""></p><p>(Source: <a href="http://commons.wikimedia.org/wiki/Category:Colorwheels#mediaviewer/File:Byrcolorwheel.png">Wikimedia Commons</a>)</p><p>When encoding data with color, take care to fit the color scheme to your data, and the story you’re aiming to tell. As we have already seen, color is often used to encode the values of categorical data. Here you want to use “qualitative” color schemes, where the aim is to pick colors that will be maximally distinctive, as widely spread around the color wheel as possible.</p><p>When using color to encode continuous data, it usually makes sense to use increasing intensity, or saturation, of color to indicate larger values. These are called “sequential” color schemes.</p><p>In some circumstances, you may have data that has positive and negative values, or which highlights deviation from a central value. Here, you should use a “diverging” color scheme, which will usually have two colors reasonably well separated on the color wheel as its end points, and cycle through a neutral color in the middle:</p><p>Here are some examples of qualitative, sequential and diverging color schemes:</p><p><img src="img/dataviz_11.jpg" alt=""></p><p>Choosing color schemes is a complex science and art, but there is no need to “roll your own” for every graphic you make. Many visualization tools include suggested color palettes, and I often make use of the <a href="http://colorbrewer2.org/">ColorBrewer</a> website. Orginally designed for maps, but useful for charts in general, these color schemes have been rigorously tested to be maximally informative.</p><p>You will notice that the suggestions made by ColorBrewer can be displayed according to their values on three color “models”: HEX, RGB and CMYK. Here is a brief explanation of these color models.</p><ul>
<li><p><strong>RGB</strong> Three values, describing a color in terms of combinations of red, blue and green light, with each scale ranging from 0 to 255; sometimes extended to RGB(A), where A is alpha, which encodes transparency. Example: <code>rgb(169, 104, 54)</code>.</p>
</li><li><p><strong>HEX</strong> A six-figure “hexadecimal” encoding of RGB values, with each scale ranging from hex 00 (equivalent to 0) to hex ff (equivalent to 255); HEX values will be familiar if you have any experience with web design, as they are commonly used to denote color in HTML and CSS. Example: <code>#a96836</code></p>
</li><li><p><strong>CMYK</strong> Four values, describing a color in combinations of cyan, magenta, yellow and black, relevant to the combination of print inks. Example: <code>cmyk(0, 0.385, 0.68, 0.337)</code></p>
</li></ul><p>You will also notice that ColorBrewer allows you to select color schemes that are colorblind safe. Surprisingly, many news organizations persist in using color schemes that exclude a substantial minority of their audience. Red and green lie on opposite sides of the color wheel, and also can be used to suggest “good” or “go,” versus “bad” or “stop.” But about 5% of men have red-green colorblindness, also known as deuteranopia.</p><p>Install <a href="http://www.colororacle.org/index.html">Color Oracle</a> to simulate how your charts and maps will look to people with various forms of colorblindness.</p><h3 id="the-data-we-will-use-today"><a name="the-data-we-will-use-today" href="#the-data-we-will-use-today"></a>The data we will use today</h3><p>Download the data for this session from <a href="data/dataviz.zip">here</a>, unzip the folder and place it on your desktop. It contains the following file:</p><ul>
<li><code>nations.csv</code> Data from the <a href="http://data.worldbank.org/indicator/all">World Bank Indicators</a> portal, which is an incredibly rich resource. Contains the following fields:<ul>
<li><code>iso2c</code> <code>iso3c</code> Two- and Three-letter <a href="http://www.nationsonline.org/oneworld/country_code_list.htm">codes</a> for each country, assigned by the <a href="http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=63545">International Organization for Standardization</a>.</li><li><code>country</code> Country name.</li><li><code>year</code></li><li><code>population</code> Estimated <a href="http://data.worldbank.org/indicator/SP.POP.TOTL">total population</a> at mid-year, including all residents apart from refugees.</li><li><code>gdp_percap</code> <a href="http://data.worldbank.org/indicator/NY.GDP.PCAP.PP.CD">Gross Domestic Product per capita</a> in current international dollars, corrected for purchasing power in different territories.</li><li><code>life_expect</code> <a href="http://data.worldbank.org/indicator/SP.DYN.LE00.IN">Life expectancy at birth</a>, in years.</li><li><code>population</code> Estimated <a href="http://data.worldbank.org/indicator/SP.POP.TOTL">total population</a> at mid-year, including all residents apart from refugees.</li><li><code>birth_rate</code> <a href="http://data.worldbank.org/indicator/SP.DYN.CBRT.IN">Live births during the year per 1,000 people</a>, based on mid-year population estimate.</li><li><code>neonat_mortal_rate</code> <a href="http://data.worldbank.org/indicator/SH.DYN.NMRT">Neonatal mortality rate</a>: babies dying before reaching 28 days of age, per 1,000 live births in a given year.</li><li><code>region</code> <code>income</code> World Bank <a href="http://siteresources.worldbank.org/DATASTATISTICS/Resources/CLASS.XLS">regions and income groups</a>, explained <a href="http://data.worldbank.org/about/country-and-lending-groups">here</a>.</li></ul>
</li></ul><h3 id="introducing-tableau-public"><a name="introducing-tableau-public" href="#introducing-tableau-public"></a>Introducing Tableau Public</h3><p><a href="http://www.tableausoftware.com/public/"><strong>Tableau Public</strong></a> allows you to create a wide variety of interactive charts and maps and organize them into dashboards and stories that can be saved to the cloud and embedded on any web page.</p><p>The free Public version of the software requires you to save your visualizations to the open web. If you have sensitive data that needs to be kept within your organization, you will need a license for the <a href="http://www.tableau.com/products/">Desktop version</a> of the software.</p><p>Tableau was developed for exploratory graphical data analysis, so it is a great tool for exploring a new dataset — filtering, sorting and aggregating the data in different ways while experimenting with various chart types.</p><p>Although Tableau was not designed as a publication tool, the ability to embed finished dashboards and stories on any web page has also allowed organizations that lack JavaScript coding expertise to create customized interactive online graphics.</p><h3 id="visualize-the-data-on-neonatal-mortality"><a name="visualize-the-data-on-neonatal-mortality" href="#visualize-the-data-on-neonatal-mortality"></a>Visualize the data on neonatal mortality</h3><h4 id="connect-to-the-data"><a name="connect-to-the-data" href="#connect-to-the-data"></a>Connect to the data</h4><p>Launch Tableau Public, and you should see the following screen:</p><p><img src="img/dataviz_12.jpg" alt=""></p><p>Under the <code>Connect</code> heading at top left, select <code>Text File</code>, navigate to the file <code>nations.csv</code> and <code>Open</code>. At this point, you can view the data, which will be labeled as follows:</p><ul>
<li>Text: <code>Abc</code></li><li>Numbers: <code>#</code></li><li>Dates: calendar symbol</li><li>Geography: globe symbol</li></ul><p>You can edit fields to give them the correct data type if there are any problems:</p><p><img src="img/dataviz_13.jpg" alt=""></p><p>Once the data has loaded, click <code>Sheet 1</code> at bottom left and you should see a screen like this:</p><p><img src="img/dataviz_14.jpg" alt=""></p><h4 id="dimensions-and-measures:-categorical-and-continuous"><a name="dimensions-and-measures:-categorical-and-continuous" href="#dimensions-and-measures:-categorical-and-continuous"></a>Dimensions and measures: categorical and continuous</h4><p>The fields should appear in the <code>Data</code> panel at left. Notice that Tableau has divided the fields into <code>Dimensions</code> and <code>Measures</code>. These broadly correspond to categorical and continuous variables. Dimensions are fields containing text or dates, while measures contain numbers.</p><p>If any field appears in the wrong place, click the small downward-pointing triangle that appears when it is highlighted and select <code>Convert to Dimension</code> or <code>Convert to Measure</code> as required.</p><h4 id="shelves-and-show-me"><a name="shelves-and-show-me" href="#shelves-and-show-me"></a>Shelves and Show Me</h4><p>Notice that the main panel contains a series of “shelves,” called <code>Pages,</code> <code>Columns</code>, <code>Rows</code>, <code>Filters</code> and so on. Tableau charts and maps are made by dragging and dropping fields from the data into these shelves.</p><p>Over to the right you should see the <code>Show Me</code> panel, which will highlight chart types you can make from the data currently loaded into the <code>Columns</code> and <code>Rows</code> shelves. It is your go-to resource when experimenting with different visualization possibilities. You can open and close this panel by clicking on its title bar.</p><h4 id="columns-and-rows:-x-and-y-axes"><a name="columns-and-rows:-x-and-y-axes" href="#columns-and-rows:-x-and-y-axes"></a>Columns and rows: X and Y axes</h4><p>The starting point for creating any chart or map in Tableau is to place fields into <code>Columns</code> and <code>Rows</code>, which for most charts correspond to the X and Y axes, respectively. When making maps, longitude goes in <code>Columns</code> and latitude in <code>Rows</code>. If you display the data as a table, then these labels are self-explanatory.</p><h4 id="some-questions-to-ask-this-data"><a name="some-questions-to-ask-this-data" href="#some-questions-to-ask-this-data"></a>Some questions to ask this data</h4><ul>
<li>How has the total number of neonatal deaths changed over time, globally, regionally and nationally?</li><li>How has the neonatal death rate for each country changed over time?</li></ul><h4 id="create-new-calculated-variables"><a name="create-new-calculated-variables" href="#create-new-calculated-variables"></a>Create new calculated variables</h4><p>The data contains fields on birth and neonatal death rates, but not the total numbers of births and deaths, which must be calculated. From the top menu, select <code>Analysis&gt;Create Calculated Field</code>. Fill in the dialog box as follows (just start typing a field name to select it for use in a formula):</p><p><img src="img/dataviz_15.jpg" alt=""></p><p>Notice that calculated fields appear in the <code>Data</code> panel preceded by an <code>=</code> symbol.</p><p>Now create a second calculated field giving the total number of neonatal deaths:</p><p><img src="img/dataviz_16.jpg" alt=""></p><p>In the second formula, we have rounded the number of neonatal deaths to the nearest thousand using <code>-3</code> (<code>-2</code> would round to the nearest hundred, <code>-1</code> to the nearest ten, <code>1</code> to one decimal place, <code>2</code> to two decimal places, and so on.)</p><p>Here we have simply run some simple arithmetic, but it’s possible to use a wide variety of functions to manipulate data in Tableau in many ways. To see all of the available functions, click on the little gray triangle at the right of the dialog boxes above.</p><h4 id="understand-that-tableau's-default-behavior-is-to-summarize/aggregate-data"><a name="understand-that-tableau's-default-behavior-is-to-summarize/aggregate-data" href="#understand-that-tableau's-default-behavior-is-to-summarize/aggregate-data"></a>Understand that Tableau’s default behavior is to summarize/aggregate data</h4><p>As we work through today’s exercise, notice that Tableau routinely summarizes or aggregates measures that are dropped into <code>Columns</code> and <code>Rows</code>, calculating a <code>SUM</code> or <code>AVG</code> (average or mean), for example.</p><p>This behavior <em>can</em> be turned off by selecting <code>Analysis</code> from the top menu and unchecking <code>Aggregate Measures</code>. However, I do not recommend doing this, as it will disable some Tableau functions. Instead, if you don’t want to summarize <em>all</em> of the data, drop categorical variables into the <code>Detail</code> shelf so that any summary statistic will be calculated at the correct level for your analysis. If necessary, you can set the aggregation so it is being performed on a single data point, and therefore has no effect.</p><h4 id="make-a-series-of-treemaps-showing-neonatal-deaths-over-time"><a name="make-a-series-of-treemaps-showing-neonatal-deaths-over-time" href="#make-a-series-of-treemaps-showing-neonatal-deaths-over-time"></a>Make a series of treemaps showing neonatal deaths over time</h4><p>A treemap allows us to directly compare the neonatal deaths in each country, nested by region.</p><p>Drag <code>Country</code> and <code>Region</code> onto <code>Columns</code> and <code>Neonatal deaths</code> onto <code>Rows</code>. Then open <code>Show Me</code> and select the <code>treemap</code> option. The initial chart should look like this:</p><p><img src="img/dataviz_17.jpg" alt=""></p><p>Look at the <code>Marks</code> shelf and see that the size and color of the rectangles reflect the <code>SUM</code> of <code>Neonatal deaths</code> for each country, while each rectangle is labeled wuth <code>Region</code> and <code>Country</code>:</p><p><img src="img/dataviz_18.jpg" alt=""></p><p>Now drag <code>Region</code> to <code>Color</code> to remove it from the <code>Label</code> and color the rectangles by region, using Tableau’s default qualitative color scheme for categorical data:</p><p><img src="img/dataviz_19.jpg" alt=""></p><p>For a more subtle color scheme, click on <code>Color</code>, select <code>Edit Colors...</code> and at the dialog box select the <code>Tableau Classic Medium</code> qualitative color scheme, then click <code>Assign Palette</code> and <code>OK</code>.</p><p>(Tableau’s qualitative color schemes are well designed, so there is no need to adopt a ColorBrewer scheme. However, it is possible to edit colors individually as you wish.)</p><p>Click on <code>Color</code> and set transparency to 75%. (For your assignment you will create a chart with overlapping circles, which will benefit from using some transparency to allow all circles to be seen. So we are setting transparency now for consistency.)</p><p>The treemap should now look like this:</p><p><img src="img/dataviz_20.jpg" alt=""></p><p>Tableau has by default aggregated <code>Neonatal deaths</code> using the <code>SUM</code> function, so what we are seeing is the number for each country added up across the years.</p><p>To see one year at a time, we need to filter by year. If you drag the existing <code>Year</code> variable to the <code>Filters</code> shelf, you will get the option to filter by a range of numbers, which isn’t what we need:</p><p><img src="img/dataviz_21.jpg" alt=""></p><p>Instead, we need to be able check individual years, and draw a treemap for each one. To do that, select <code>Year</code> in the <code>Dimensions</code> panel and <code>Duplicate</code>.</p><p>Select the new variable and <code>Convert to Discrete</code> and then <code>Rename</code>    it <code>Year (discrete)</code>. Now drag this new variable to <code>Filters</code>, select 2014, and click <code>OK</code>:</p><p><img src="img/dataviz_22.jpg" alt=""></p><p>The treemap now displays the data for 2014:</p><p><img src="img/dataviz_23.jpg" alt=""></p><p>That’s good for a snapshot of the data, but with a little tinkering, we can adapt this visualization to show change in the number of neonatal deaths over time at the national, regional and global levels.</p><p>Select <code>Year (discrete)</code> in the <code>Filters</code> shelf and <code>Filter ...</code> to edit the filter. Select all the years with even numbers and click <code>OK</code>:</p><p><img src="img/dataviz_24.jpg" alt=""></p><p>Now drag <code>Year (discrete)</code> onto <code>Rows</code> and the chart should look like this:</p><p><img src="img/dataviz_25.jpg" alt=""></p><p>The formatting needs work, but notice that we now have a bar chart made out of treemaps.</p><p>Extend the chart area to the right by changing from <code>Standard</code> to <code>Entire View</code> on the dropdown menu in the top ribbon:</p><p><img src="img/dataviz_26.jpg" alt=""></p><p>I find it more intuitive to have the most recent year at the top, so select <code>Year (discrete)</code> in the <code>Rows</code> shelf, select <code>Sort</code> and fill in the dialog box so that the years are sorted in <code>Descending</code> order:</p><p><img src="img/dataviz_27.jpg" alt=""></p><p>The chart should now look like this:</p><p><img src="img/dataviz_28.jpg" alt=""></p><p>We will create a map to serve as a legend for the regions, so click on the title bar for the color legend and select <code>Hide Card</code> to remove it from the visualization.</p><p>To remove some clutter from the chart, select <code>Format&gt;Borders</code> from the top menu, and under <code>Sheet&gt;Row Divider</code>, set <code>Pane</code> to <code>None</code>. Then close the <code>Format Borders</code> panel.</p><p>Right-click on the <code>Sheet 1</code> title for the chart and select <code>Hide Title</code>. Also right-click on <code>Year (discrete)</code> at the top left of the chart and select <code>Hide Field Labels for Rows</code>. Then hover just above the top bar to get a double-arrowed drag symbol and drag upwards to reduce the white space at the top. You may also want to drag the bars a little closer to the year labels. </p><p>The labels will only appear in the larger rectangles. Rather than removing them entirely, let’s just leave a label for India in 2014, to make it clear that this is the country with by far the largest number of neonatal deaths. Click on <code>Label</code> in the Marks shelf, and switch from <code>All</code> to <code>Selected</code> under <code>Marks to Label</code>. Then right-click on the rectangle for India in 2014, and select <code>Mark Label&gt;Always Show</code>. The chart should now look like this:</p><p><img src="img/dataviz_29.jpg" alt=""></p><p>Hover over one of the rectangles, and notice the tooltip that appears. By default, all the fields we have used to make the visualization appear in the tooltip. (If you need any more, just drag those fields onto <code>Tooltip</code>.) Click on <code>Tooltip</code> and edit as follows. (Unchecking <code>Include command buttons</code> disables some interactivity, giving a plain tooltip):</p><p><img src="img/dataviz_30.jpg" alt=""></p><h4 id="save-to-the-web"><a name="save-to-the-web" href="#save-to-the-web"></a>Save to the web</h4><p>Right-click on <code>Sheet 1</code> at bottom left and <code>Rename Sheet</code> to <code>Treemap bar chart</code>. Then select <code>File&gt;Save to Tableau Public...</code> from the top menu. At the logon dialog box enter your Tableau Public account details, give the Workbook a suitable name and click <code>Save</code>. When the save is complete, a view of the  visualization on Tableau’s servers will open in your default browser.</p><h4 id="make-a-map-to-use-as-a-color-legend"><a name="make-a-map-to-use-as-a-color-legend" href="#make-a-map-to-use-as-a-color-legend"></a>Make a map to use as a color legend</h4><p>Select <code>Worksheet&gt;New Worksheet</code> from the top menu, and double-click on <code>Country</code>. Tableau recognizes the names of countries and states/provinces; for the U.S., it also recognizes counties. Its default map-making behavior is to put a circle at the geographic center, or centroid, of each area, which can be scaled and colored to reflect values from the data:</p><p><img src="img/dataviz_31.jpg" alt=""></p><p>However, we need each country to be filled with color by region. Using <code>Show Me</code>, switch to the <code>filled maps</code> option, and each nation should fill with color. Drag <code>Region</code> to <code>Color</code> and see how the same color scheme we used previously carries over to the map. Click on <code>Color</code>, set the transparency to 75% to match the bubble chart and remove the borders. Also click on <code>Tooltip</code> and uncheck <code>Show tooltip</code> so that no tooltip appears on the legend.</p><p>We will use this map as a color legend, so its separate color legend is unnecessary. Click the color legend’s title bar and select <code>Hide Card</code> to remove it from the visualization. Also remove the <code>Sheet 2</code> title as before.</p><p>Center the map in the view by clicking on it, holding and panning, just as you would on Google Maps. It should now look something like this:</p><p><img src="img/dataviz_32.jpg" alt=""></p><p>Rename the worksheet <code>Map legend</code> and save to the web again.</p><h4 id="make-a-line-chart-showing-neonatal-mortality-rate-by-country-over-time"><a name="make-a-line-chart-showing-neonatal-mortality-rate-by-country-over-time" href="#make-a-line-chart-showing-neonatal-mortality-rate-by-country-over-time"></a>Make a line chart showing neonatal mortality rate by country over time</h4><p>To address our second question, and explore the neonatal death rate over time by country, we can use a line chart.</p><p>First, rename <code>Neonat Mortal</code> as <code>Neonatal death rate (per 1,000 births)</code>. Then, open a new worksheet, drag this variable to <code>Rows</code> and <code>Year</code> to <code>Columns</code>.  The chart should now look like this:</p><p><img src="img/dataviz_33.jpg" alt=""></p><p>Tableau has aggregated the data by adding up the rates for each country in every year, which makes no sense here. So drag <code>Country</code> to <code>Detail</code> in the <code>Marks</code> shelf to draw one line per country:</p><p><img src="img/dataviz_34.jpg" alt=""></p><p>Drag region to <code>Color</code> and set the transparency to 75%.</p><p>Now right-click on the X axis, select <code>Edit Axis</code>, edit the dialog box as follows and click <code>OK</code>:</p><p><img src="img/dataviz_35.jpg" alt=""></p><p>Right-click on the X axis again, select <code>Format</code>, change <code>Alignment</code> to <code>Up</code> and use the dropdown menu set the <code>Font</code> to bold. Also remove the <code>Sheet 3</code> title.</p><p>The chart should now look like this:</p><p><img src="img/dataviz_36.jpg" alt=""></p><p>We can also highlight the countries with the highest total number of neonatal deaths by dragging <code>Neonatal deaths</code> to <code>Size</code>. The chart should now look like this:</p><p><img src="img/dataviz_37.jpg" alt=""></p><p>This line chart shows that the trend in most countries has been to reduce neonatal deaths, while some countries have had more complex trajectories. But to make comparisons between individual countries, it will be necessary to add controls to filter the chart.</p><p>Tableau’s default behavior when data is filtered is to redraw charts to reflect the values in the filtered data. So if we want the Y axis and the line thicknesses to stay the same when the chart is filtered, we need to freeze them.</p><p>To freeze the line thicknesses, hover over the title bar for the line thickness legend, select <code>Edit Sizes...</code> and fill in the dialog box as follows:</p><p><img src="img/dataviz_38.jpg" alt=""></p><p>Now remove this legend from the visualization, together with the color legend. We can later add an annotation to our dashboard to explain the line thickness.</p><p>To freeze the Y axis, right-click on it, select <code>Edit Axis...</code>, make it <code>Fixed</code> and click <code>OK</code>:</p><p><img src="img/dataviz_39.jpg" alt=""></p><p>Right-click on the Y axis again, select <code>Format...</code> and increase the font size to <code>10pt</code> to make it easier to read.</p><p>Now drag <code>Country</code> to <code>Filters</code>, make sure <code>All</code> are checked, and at the dialog box, click <code>OK</code>:</p><p><img src="img/dataviz_40.jpg" alt=""></p><p>Now we need to add a filter control to select countries to compare. On <code>Country</code> in the <code>Filters</code> shelf, select <code>Show Filter</code>. A default filter control, with a checkbox for each nation, will appear to the right of the chart:</p><p><img src="img/dataviz_41.jpg" alt=""></p><p>This isn’t the best filter control for this visualization. To change it, click on the title bar for the filter, note the range of filter controls available, and select <code>Multiple Values (Custom List)</code>. This allows users to select individual countries by starting to type their names. Then select <code>Edit Title...</code> and add some text explaining how the filter works:</p><p><img src="img/dataviz_42.jpg" alt=""></p><p>Take some time to explore how this filter works.</p><p>Rename <code>Income</code> to <code>Income group</code>. Then add <code>Region</code> and <code>Income group</code> to <code>Filters</code>, making sure that <code>All</code> options are checked for each. Select <code>Show Filter</code> for both of these filters, and select <code>Single Value Dropdown</code> for the control. Reset both of these filters to <code>All</code>, and the chart should now look like this:</p><p><img src="img/dataviz_43.jpg" alt=""></p><p>Notice that the <code>Income group</code> filter lists the options in alphabetical order, rather than income order, which would make more sense. To fix this, right-click on <code>Income group</code> in the data panel and select <code>Default Properties&gt;Sort</code>. At the dialog box below, select <code>Manual</code> sort, edit the order as follows and click <code>OK</code>:</p><p><img src="img/dataviz_44.jpg" alt=""></p><p>The chart should now look like this:</p><p><img src="img/dataviz_45.jpg" alt=""></p><p>Finally, click on <code>Tooltip</code> and edit as follows:</p><p><img src="img/dataviz_46.jpg" alt=""></p><p>Rename the sheet <code>Line chart</code> and save to the web.</p><h4 id="make-a-dashboard-combining-both-charts"><a name="make-a-dashboard-combining-both-charts" href="#make-a-dashboard-combining-both-charts"></a>Make a dashboard combining both charts</h4><p>From the top menu, select <code>Dashboard&gt;New Dashboard</code>. Set its <code>Size</code> to <code>Automatic</code>, so that the dashboard will fill to the size of any screen on which it is displayed:</p><p><img src="img/dataviz_47.jpg" alt=""></p><p>To make a dashboard, drag charts, and other elements from the left-hand panel to the dashboard area. Notice that Tableau allows you to add items including: horizontal and vertical containers, text boxes, images (useful for adding a publication’s logo), embedded web pages and blank space. These can be added <code>Tiled</code>, which means they cannot overlap, or <code>Floating</code>, which allows one element to be placed over another.</p><p>Drag <code>Treemap bar chart</code> from the panel at left to the main panel. The default title, from the worksheet name, isn’t very informative, so right-click on that, select <code>Edit Title ...</code> and change to <code>Total deaths</code>.</p><p>Now add <code>Line Chart</code> to the right of the dashboard (the gray area will show where it will appear) and edit its title to <code>Death rates</code>. Also add a note to explain that line widths are proportional to the total number of deaths. The dashboard should now look like this:</p><p><img src="img/dataviz_48.jpg" alt=""></p><p>Notice that the <code>Country</code>, <code>Region</code> and <code>Income group</code> filters control only the line chart. To make them control the treemaps, too, click on each filter, open up the dropdown menu form the downward-pointing triangle, and select <code>Apply to Worksheets&gt;Selected Worksheets...</code> and fill in the dialog box as follows:</p><p><img src="img/dataviz_49.jpg" alt=""></p><p>The filters will now control both charts.</p><p>Add <code>Map legend</code> for a color legend at bottom right. (You will probably need to drag the window for the last filter down to push it into position.) Hide the legend’s title then right-click on the map and select <code>Hide View Toolbar</code> to remove the map controls.</p><p>We can also allow the highlighting of a country on one chart to be carried across the entire dashboard. Select <code>Dashboard&gt;Actions...</code> from the top menu, and at the first dialog box select <code>Add action&gt;Highlight</code>. Filling the second dialog box as follows will cause each country to be highlighted across the dashboard when it is clicked on just one of the charts:</p><p><img src="img/dataviz_50.jpg" alt=""></p><p>Click <code>OK</code> on both dialog boxes to apply this action.</p><p>Select <code>Dashboard&gt;Show Title</code> from the top menu. Right-click on it, select <code>Edit Title...</code> and change from the default to something more informative:</p><p><img src="img/dataviz_51.jpg" alt=""></p><p>Now drag a <code>Text</code> box to the bottom of the dashboard and add a footnote giving source information:</p><p><img src="img/dataviz_52.jpg" alt=""></p><p>The dashboard should now look like this:</p><p><img src="img/dataviz_53.jpg" alt=""></p><h4 id="design-for-different-devices"><a name="design-for-different-devices" href="#design-for-different-devices"></a>Design for different devices</h4><p>This dashboard works on a large screen, but not on a small phone. To see this, click the <code>Device Preview</code> button at top left and select <code>Phone</code> under <code>Device type</code>. In portrait orientation, this layout does not work at all:</p><p><img src="img/dataviz_54.jpg" alt=""></p><p>Click the <code>Add Phone Layout</code> at top right, and then click <code>Custom</code> tab under <code>Layout - Phone</code> in the left-hand panel. You can then rearrange and if necessary remove elements for different devices. Here I have removed the line chart and filter controls, and changed the legend to a <code>Floating</code> element so that it sits in the blank space to the top right of the bar chart of treemaps.</p><p><img src="img/dataviz_55.jpg" alt=""></p><p>Now save to the web once more. Once the dashboard is online, use the <code>Share</code> link at the bottom to obtain an embed code, which can be inserted into the HTML of any web page.</p><p>(You can also <code>Download</code> a static view of the graphic as a PNG image or a PDF.)</p><p>You can download the workbook for any Tableau visualization by clicking the <code>Download Workbook</code> link. The files (which will have the extension <code>.twbx</code>) will open in Tableau Public.</p><p>Having saved a Tableau visualization to the web, you can reopen it by selecting <code>File&gt;Open from Tableau Public...</code> from the top menu.</p><h4 id="another-approach-to-responsive-design"><a name="another-approach-to-responsive-design" href="#another-approach-to-responsive-design"></a>Another approach to responsive design</h4><p>As an alternative to using Tableau’s built-in device options, you may wish to create three different dashboards, each with a size appropriate for phones, tablets, and desktops respectively. You can then follow the instructions <a href="https://public.tableau.com/s/blog/2014/11/making-responsive-tableau-dashboards">here</a> to put the embed codes for each of these dashboards into a <code>div</code> with a separate class, and then use <code>@media</code> CSS rules to ensure that only the div with the correct dashboard displays, depending on the size of the device.</p><p>If you need to make a fully responsive Tableau visualization and are struggling, contact me for help!</p><p>When making responsively designed web pages, make sure to include this line of code between the <code>&lt;head&gt;&lt;/head&gt;</code> tags of your HTML:</p><pre class="css hljs"><code class="CSS" data-origin="<pre><code class=&quot;CSS&quot;>&amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&amp;gt;
</code></pre>">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
</code></pre><h4 id="from-dashboards-to-stories"><a name="from-dashboards-to-stories" href="#from-dashboards-to-stories"></a>From dashboards to stories</h4><p>Tableau also allows you to create stories, which combine successive dashboards into a step-by-step narrative. Select <code>Story&gt;New Story</code> from the top menu. Having already made a dashboard, you should find these simple and intuitive to create. Select <code>New Blank Point</code> to add a new scene to the narrative.</p><h3 id="some-more-practice"><a name="some-more-practice" href="#some-more-practice"></a>Some more practice</h3><ul>
<li><p>See if you can create <a href="https://public.tableau.com/views/dataviz_5/Dashboard2?:embed=y&amp;:display_count=yes">this second dashboard</a> from the data.</p>
<p>Here are some hints:</p>
<ul>
<li>Drop <code>Year</code> into the <code>Pages</code> shelf to create the control to cycle through the years.</li><li>You will need to change the <code>Marks</code> to solid circles and scale them by the total number of neonatal deaths. Having done so, you will also need to increase the size of all circles so countries with small numbers of neonatal deaths are visible. Good news: Tableau’s default behavior is to size circles correctly by area, so they will be the correct sizes, relative to one another.</li><li>You will need to switch to a <code>Logarithmic</code> X axis and alter/fix its range.</li><li>Format GDP per capita in dollars by clicking on it in the <code>Data</code> panel and selecting <code>Default Properties&gt;Number Format&gt;Currency (Custom)</code>.</li><li>Create a single trend line for each year’s data, so that the line shifts with the circles from year to year. Do this by dragging <code>Trend line</code> into the chart area from the <code>Analytics</code> panel. You will then need to select <code>Analysis&gt;Trend Lines&gt;Edit Trend Lines...</code> and adjust the options to give a single line with the correct behavior.</li><li><p>Getting the smaller circles rendered on top of the larger ones, so their tooltips can be accessed, is tricky. To solve this, open the dropdown menu for <code>Country</code> in the <code>Marks</code> shelf, select <code>Sort</code> and fill in the dialog box as follows:</p>
<p><img src="img/dataviz_56.jpg" alt=""></p>
<p>Now drag <code>Country</code> so it appears at the top of the list of fields in the <code>Marks</code> shelf.</p>
</li></ul>
<p>This should be a challenging exercise that will help you learn how Tableau works. If you get stuck, download my visualization and study how it is put together.</p>
</li></ul><h3 id="further-reading/viewing"><a name="further-reading/viewing" href="#further-reading/viewing"></a>Further reading/viewing</h3><p>Alberto Cairo: <a href="http://www.amazon.com/The-Functional-Art-introduction-visualization/dp/0321834739"><em>The Functional Art: An Introduction to Information Graphics and Visualization</em></a></p><p>Nathan Yau: <a href="http://www.amazon.com/Data-Points-Visualization-Means-Something/dp/111846219X"><em>Data Points: Visualization That Means Something</em></a></p><p><a href="http://www.tableausoftware.com/public/training">Tableau Public training videos</a></p><p><a href="http://www.tableausoftware.com/public/gallery/all">Gallery of Tableau Public visualizations</a>: Again, you can download the workbooks to see how they were put together.</p><p><a href="http://kb.tableau.com/">Tableau Public Knowledge Base</a>: Useful resource with the answers to many queries about how to use the software.</p>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
