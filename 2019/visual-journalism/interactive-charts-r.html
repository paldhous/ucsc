<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Visual Journalism: Data Viz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../../css/bootstrap.min.css" rel="stylesheet"> 
  <link href="../../css/custom2.css" rel="stylesheet">
</head>

<body class="markdown github">

	<header class="navbar-inverse navbar-fixed-top">
		<div class="container">
			<nav role="navigation">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a href="index.html" class="navbar-brand">Visual Journalism: Data Viz</a>
				</div> <!-- /.navbar-header -->
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Class notes<b class="caret"></b></a>
							<ul class="dropdown-menu">
								<li><a href="principles.html">Basic principles of data analysis and visualization</a></li>
								<li><a href="acquiring-data.html">Finding and downloading data</a></li>
								<li><a href="cleaning-data.html">Processing and cleaning data</a></li>
								<li><a href="basic-charts.html">Basic charts with Plotly</a></li>
								<li><a href="data-processing-r.html">Processing data with R</a></li>
								<li><a href="static-charts-r.html">Static charts with R</a></li>
								<li><a href="interactive-charts-r.html">Interactive charts with R</a></li>
								<li><a href="animations-r.html">Animation: GIFs and videos from R</a></li>
							</ul>
						</li>
						<li>
						<li><a href="software.html">Software</a></li>
						<li><a href="data.html">Data</a></li>
						<li><a href="mailto:p.aldhous@gmail.com">Email instructor</a></li>					
					</ul>
				</div><!-- /.navbar-collapse -->
			</nav>
		</div> <!-- /.navbar-header -->
	</header>

	<div class="container all">

<h1 id="from-r-to-interactive-charts-and-maps"><a name="from-r-to-interactive-charts-and-maps" href="#from-r-to-interactive-charts-and-maps"></a>From R to interactive charts and maps</h1><p>It is possible to make online, interactive charts and maps directly from R/RStudio, thanks to a group of R packages collectively known as <a href="https://www.htmlwidgets.org/"><strong>htmlwidgets</strong></a>.</p><p>These packages take instructions in R code, and write the JavaScript and HTML necessary to make charts using popular JavaScript visualization libraries. They also allow you to easily export the charts that you create in R as responsively designed web pages, which can be embedded in other projects through simple <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><strong>iframes</strong></a>.</p><p>This means you can work in a single environment to both process data and make online charts. Maintaining a simple, streamlined workflow makes it easier to produce graphics quickly on news deadlines.</p><h3 id="the-data-we-will-use"><a name="the-data-we-will-use" href="#the-data-we-will-use"></a>The data we will use</h3><p>Download the data for this session from <a href="data/interactive-charts-r.zip">here</a>, unzip the folder and place it on your desktop. It contains the following files:</p><ul>
<li><p><code>food_stamps.csv</code> <a href="http://www.fns.usda.gov/pd/supplemental-nutrition-assistance-program-snap">US Department of Agriculture data</a> on the number of participants, in millions, and costs, in $ billions, of the federal Supplemental Nutrition Assistance Program from 1969 to 2016, as used previously.</p>
</li><li><p><code>disease_democ.csv</code> Data illustrating a controversial theory suggesting that the emergence of democratic political systems has depended largely on nations having low rates of infectious disease, as used previously.</p>
</li><li><p><code>kindergarten.csv</code> Data from the <a href="https://data.chhs.ca.gov/dataset/school-immunizations-in-kindergarten-by-academic-year">California Department of Public Health</a>, documenting enrollment and the number of children with complete immunizations at entry into kindergartens in California from 2001 to 2015, as used previously.</p>
</li><li><code>nations.csv</code> Data from the World Bank Indicators portal, as used previously.</li><li><p><code>seismic.zip</code> Zipped <a href="https://en.wikipedia.org/wiki/Shapefile">shapefile</a> with data on the annual risk of a damaging earthquake for the continental United States, from the <a href="https://earthquake.usgs.gov/hazards/induced/">US Geological Survey</a>.</p>
</li><li><p><code>test.html</code> Web page to embed the interactive charts and maps we make today.</p>
</li></ul><h3 id="setting-up"><a name="setting-up" href="#setting-up"></a>Setting up</h3><p>Launch RStudio Cloud, upload the zipped data to your project in the <code>UCSC</code> workspace, and save a new R script as <code>interactive-charts.R</code>.</p><h3 id="make-ggplot2-charts-into-interactive-plotly-charts"><a name="make-ggplot2-charts-into-interactive-plotly-charts" href="#make-ggplot2-charts-into-interactive-plotly-charts"></a>Make ggplot2 charts into interactive Plotly charts</h3><p><strong><a href="https://plot.ly/r/getting-started/">plotly</a></strong> is an R package for creating interactive web-based charts using the <a href="https://plot.ly/javascript/">plotly.js</a> JavaScript library, which powers the Plotly web app that we worked with earlier. It includes a function <code>ggplotly</code> that converts charts made with <strong>ggplot2</strong> directly into Plotly charts.</p><h4 id="make-an-interactive-version-of-the-food-stamps-dot-and-line-chart"><a name="make-an-interactive-version-of-the-food-stamps-dot-and-line-chart" href="#make-an-interactive-version-of-the-food-stamps-dot-and-line-chart"></a>Make an interactive version of the food stamps dot-and-line chart</h4><p>The following code installs and loads the package (which also automatically loads ggplot2), loads <strong>readr</strong> and <strong>dplyr</strong>, then loads the food stamps data we used previously.</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># install and load plotly, load readr and dplyr
install.packages(&quot;plotly&quot;)
library(plotly)
library(readr)
library(dplyr)
</code></pre>"><span class="hljs-comment"># install and load plotly, load readr and dplyr</span>
install.packages(<span class="hljs-string">"plotly"</span>)
<span class="hljs-keyword">library</span>(plotly)
<span class="hljs-keyword">library</span>(readr)
<span class="hljs-keyword">library</span>(dplyr)
</code></pre><p>Now we will remake the dot-and-line food stamps chart in <strong>ggplot2</strong>, and turn it into a Plotly chart.</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load data
food_stamps &amp;lt;- read_csv(&quot;interactive-charts-r/food_stamps.csv&quot;)

# dot-and-line chart
food_stamps_chart &amp;lt;- ggplot(food_stamps, aes(x = year, y = participants)) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Participants (millions)&quot;) +
  theme_minimal(base_size = 14, base_family = &quot;Georgia&quot;) +
  geom_point() +
  geom_line()

plot(food_stamps_chart)
</code></pre>"><span class="hljs-comment"># load data</span>
food_stamps &lt;- read_csv(<span class="hljs-string">"interactive-charts-r/food_stamps.csv"</span>)

<span class="hljs-comment"># dot-and-line chart</span>
food_stamps_chart &lt;- ggplot(food_stamps, aes(x = year, y = participants)) +
  xlab(<span class="hljs-string">"Year"</span>) +
  ylab(<span class="hljs-string">"Participants (millions)"</span>) +
  theme_minimal(base_size = <span class="hljs-number">14</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  geom_point() +
  geom_line()

plot(food_stamps_chart)
</code></pre><p>This saves a <strong>ggplot2</strong> chart in your environment, as we’ve seen before. The following code turns it into a Plotly chart, which should appear in the <code>Viewer</code> tab at bottom right:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># make interactive version
food_stamps_interactive &amp;lt;- ggplotly(food_stamps_chart)

print(food_stamps_interactive)
</code></pre>"><span class="hljs-comment"># make interactive version</span>
food_stamps_interactive &lt;- ggplotly(food_stamps_chart)

print(food_stamps_interactive)
</code></pre><iframe width="100%" height="450" frameborder="0" scrolling="no" src="food_stamps_dot_line1.html"></iframe><p>The default interactive chart has some controls that appear at top right when you hover over the chart. The default tooltip also doesn’t specify that the numbers for participants are in millions, and does not display anything for the costs variable, because it is not included in the chart.</p><p>But it is fairly easy to fix these problems. This code removes the controls:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># remove plotly controls
food_stamps_interactive &amp;lt;- ggplotly(food_stamps_chart) %&amp;gt;% 
  config(displayModeBar = FALSE)

print(food_stamps_interactive)
</code></pre>"><span class="hljs-comment"># remove plotly controls</span>
food_stamps_interactive &lt;- ggplotly(food_stamps_chart) %&gt;% 
  config(displayModeBar = <span class="hljs-literal">FALSE</span>)

print(food_stamps_interactive)
</code></pre><p>To reformat the tooltips, we need to modify both the <strong>ggplot2</strong> and <strong>plotly</strong> code, like this:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># customize the tooltips
food_stamps_chart &amp;lt;- ggplot(food_stamps, aes(x = year, 
                                             y = participants,
                                             text = paste0(&quot;&amp;lt;b&amp;gt;Year: &amp;lt;/b&amp;gt;&quot;, year,&quot;&amp;lt;br&amp;gt;&quot;,
                                                           &quot;&amp;lt;b&amp;gt;Participants: &amp;lt;/b&amp;gt;&quot;, participants,&quot; million&amp;lt;br&amp;gt;&quot;,
                                                           &quot;&amp;lt;b&amp;gt;Costs: &amp;lt;/b&amp;gt; @@bodyquot;, costs, &quot; billion&quot;),
                                             group = 1)) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Participants (millions)&quot;) +
  theme_minimal(base_size = 14, base_family = &quot;Georgia&quot;) +
  geom_point() +
  geom_line()

food_stamps_interactive &amp;lt;- ggplotly(food_stamps_chart, tooltip = &quot;text&quot;) %&amp;gt;% 
  config(displayModeBar = FALSE) %&amp;gt;%
  layout(hoverlabel = list(bgcolor = &quot;white&quot;,
                           font = list(family = &quot;Georgia&quot;)))

print(food_stamps_interactive)
</code></pre>"><span class="hljs-comment"># customize the tooltips</span>
food_stamps_chart &lt;- ggplot(food_stamps, aes(x = year, 
                                             y = participants,
                                             text = paste0(<span class="hljs-string">"&lt;b&gt;Year: &lt;/b&gt;"</span>, year,<span class="hljs-string">"&lt;br&gt;"</span>,
                                                           <span class="hljs-string">"&lt;b&gt;Participants: &lt;/b&gt;"</span>, participants,<span class="hljs-string">" million&lt;br&gt;"</span>,
                                                           <span class="hljs-string">"&lt;b&gt;Costs: &lt;/b&gt; $"</span>, costs, <span class="hljs-string">" billion"</span>),
                                             group = <span class="hljs-number">1</span>)) +
  xlab(<span class="hljs-string">"Year"</span>) +
  ylab(<span class="hljs-string">"Participants (millions)"</span>) +
  theme_minimal(base_size = <span class="hljs-number">14</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  geom_point() +
  geom_line()

food_stamps_interactive &lt;- ggplotly(food_stamps_chart, tooltip = <span class="hljs-string">"text"</span>) %&gt;% 
  config(displayModeBar = <span class="hljs-literal">FALSE</span>) %&gt;%
  layout(hoverlabel = list(bgcolor = <span class="hljs-string">"white"</span>,
                           font = list(family = <span class="hljs-string">"Georgia"</span>)))

print(food_stamps_interactive)
</code></pre><p>This code creates a custom tooltip inside the <strong>ggplot2</strong> aesthetic mapping (<code>aes</code>), setting <code>text</code> as the text we want to display, including values drawn from variables in the data. The code uses R’s <code>paste0</code> function to concatenate text; <code>&lt;br&gt;</code> is HTML code for a new line; <code>&lt;b&gt;&lt;/b&gt;</code> are HTML tags that mark text to appear in bold.</p><p>When writing a custom tooltip, we also need to include <code>group = 1</code> in the <code>aes</code> mapping.</p><p>The code in the final <code>layout</code> function styles the tooltip, using a white background and changing the font family to be consistent with the rest of the chart. See <a href="https://plot.ly/r/#layout-options">here</a> for more Plotly chart layout options.</p><p>We can now save the chart as a standalone web page by selecting <code>Export&gt;Save as Web Page...</code> from the <code>Viewer</code> tab menu.</p><p>Open the saved web page in your browser and notice that the chart is completely responsive: It will adjust its size to fit the space available.</p><p>So now we can embed the chart in the file <code>test.html</code>, just like we did for the chart exported from the Plotly web up in a previous class:</p><p>Open the <code>test.html</code> file in Sublime Text. Insert the code into the page and edit as follows:</p><pre class="javascript hljs"><code class="JavaScript" data-origin="<pre><code class=&quot;JavaScript&quot;>&amp;lt;div class=&quot;container&quot;&amp;gt;

    &amp;lt;iframe width=&quot;100%&quot; height=&quot;450&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; src=&quot;food_stamps_interactive.html&quot;&amp;gt;&amp;lt;/iframe&amp;gt;

&amp;lt;/div&amp;gt; &amp;lt;!-- /.container --&amp;gt;
</code></pre>">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"container"</span>&gt;

    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">iframe</span> <span class="hljs-attribute">width</span>=<span class="hljs-value">"100%"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"450"</span> <span class="hljs-attribute">frameborder</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">scrolling</span>=<span class="hljs-value">"no"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"food_stamps_interactive.html"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">iframe</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- /.container --&gt;</span>
</span></code></pre><p>This should be the result:</p><iframe width="100%" height="450" frameborder="0" scrolling="no" src="food_stamps_dot_line2.html"></iframe><h4 id="make-interactive-versions-of-the-disease-and-democracy-scatterplot"><a name="make-interactive-versions-of-the-disease-and-democracy-scatterplot" href="#make-interactive-versions-of-the-disease-and-democracy-scatterplot"></a>Make interactive versions of the disease and democracy scatterplot</h4><p>This code creates the basic scatterplot with a linear trend line, without mapping <code>income_group</code> to the color of the points:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load data
disease_democ &amp;lt;- read_csv(&quot;disease_democ.csv&quot;)

# make static chart
disease_democ_chart &amp;lt;- ggplot(disease_democ, aes(x = infect_rate, 
                                                 y = democ_score,
                                                 text = paste0(&quot;&amp;lt;b&amp;gt;Country: &amp;lt;/b&amp;gt;&quot;, country,&quot;&amp;lt;br&amp;gt;&quot;,
                                                               &quot;&amp;lt;b&amp;gt;Infectious disease prevalence: &amp;lt;/b&amp;gt;&quot;, infect_rate,&quot;&amp;lt;br&amp;gt;&quot;,
                                                               &quot;&amp;lt;b&amp;gt;Democratization: &amp;lt;/b&amp;gt;&quot;, democ_score),
                                                 group = 1)) +
  xlab(&quot;Infectious disease prevalence score&quot;) + 
  ylab(&quot;Democratization score&quot;) +
  theme_minimal(base_size = 14, base_family = &quot;Georgia&quot;) +
  geom_point() +
  geom_smooth(method = lm, se = FALSE)

# make interactive version
disease_democ_interactive &amp;lt;- ggplotly(disease_democ_chart, tooltip = &quot;text&quot;) %&amp;gt;%
  config(displayModeBar = FALSE)

print(disease_democ_interactive)
</code></pre>"><span class="hljs-comment"># load data</span>
disease_democ &lt;- read_csv(<span class="hljs-string">"disease_democ.csv"</span>)

<span class="hljs-comment"># make static chart</span>
disease_democ_chart &lt;- ggplot(disease_democ, aes(x = infect_rate, 
                                                 y = democ_score,
                                                 text = paste0(<span class="hljs-string">"&lt;b&gt;Country: &lt;/b&gt;"</span>, country,<span class="hljs-string">"&lt;br&gt;"</span>,
                                                               <span class="hljs-string">"&lt;b&gt;Infectious disease prevalence: &lt;/b&gt;"</span>, infect_rate,<span class="hljs-string">"&lt;br&gt;"</span>,
                                                               <span class="hljs-string">"&lt;b&gt;Democratization: &lt;/b&gt;"</span>, democ_score),
                                                 group = <span class="hljs-number">1</span>)) +
  xlab(<span class="hljs-string">"Infectious disease prevalence score"</span>) + 
  ylab(<span class="hljs-string">"Democratization score"</span>) +
  theme_minimal(base_size = <span class="hljs-number">14</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  geom_point() +
  geom_smooth(method = lm, se = <span class="hljs-literal">FALSE</span>)

<span class="hljs-comment"># make interactive version</span>
disease_democ_interactive &lt;- ggplotly(disease_democ_chart, tooltip = <span class="hljs-string">"text"</span>) %&gt;%
  config(displayModeBar = <span class="hljs-literal">FALSE</span>)

print(disease_democ_interactive)
</code></pre><p>This should be the result:</p><iframe width="100%" height="450" frameborder="0" scrolling="no" src="disease_democ1.html"></iframe><p>The following code creates a version of this chart with a qualitative ColorBrewer palette for the points, to color them by the World Bank income group.</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># make static chart
disease_democ_chart &amp;lt;- ggplot(disease_democ, aes(x=infect_rate,
                                                 y=democ_score,
                                                 text=paste0(country,&quot;&amp;lt;br&amp;gt;&quot;,
                                                             &quot;Disease: &quot;,infect_rate,&quot;&amp;lt;br&amp;gt;&quot;,
                                                             &quot;Democratization: &quot;,democ_score),
                                                 group = 1)) +
  xlab(&quot;Infectious disease prevalence score&quot;) + 
  ylab(&quot;Democratization score&quot;) +
  theme_minimal(base_size = 14) +
  geom_smooth(method = lm, se = FALSE, color = &quot;black&quot;, linetype = &quot;dotdash&quot;, size = 0.3) +
  geom_point(aes(color=income_group), size = 3, alpha = 0.5) +
  scale_x_continuous(limits=c(0,60)) +
  scale_y_continuous(limits=c(0,100)) +
  scale_color_brewer(palette = &quot;Set1&quot;,
                     name=&quot;Income group&quot;,
                     breaks=c(&quot;High income: OECD&quot;,&quot;High income: non-OECD&quot;,&quot;Upper middle income&quot;,&quot;Lower middle income&quot;,&quot;Low income&quot;))

# make interactive version
disease_democ_interactive &amp;lt;- ggplotly(disease_democ_chart, tooltip=&quot;text&quot;) %&amp;gt;% 
  config(displayModeBar = FALSE)

# plot the chart
print(disease_democ_interactive)
</code></pre>"><span class="hljs-comment"># make static chart</span>
disease_democ_chart &lt;- ggplot(disease_democ, aes(x=infect_rate,
                                                 y=democ_score,
                                                 text=paste0(country,<span class="hljs-string">"&lt;br&gt;"</span>,
                                                             <span class="hljs-string">"Disease: "</span>,infect_rate,<span class="hljs-string">"&lt;br&gt;"</span>,
                                                             <span class="hljs-string">"Democratization: "</span>,democ_score),
                                                 group = <span class="hljs-number">1</span>)) +
  xlab(<span class="hljs-string">"Infectious disease prevalence score"</span>) + 
  ylab(<span class="hljs-string">"Democratization score"</span>) +
  theme_minimal(base_size = <span class="hljs-number">14</span>) +
  geom_smooth(method = lm, se = <span class="hljs-literal">FALSE</span>, color = <span class="hljs-string">"black"</span>, linetype = <span class="hljs-string">"dotdash"</span>, size = <span class="hljs-number">0.3</span>) +
  geom_point(aes(color=income_group), size = <span class="hljs-number">3</span>, alpha = <span class="hljs-number">0.5</span>) +
  scale_x_continuous(limits=c(<span class="hljs-number">0</span>,<span class="hljs-number">60</span>)) +
  scale_y_continuous(limits=c(<span class="hljs-number">0</span>,<span class="hljs-number">100</span>)) +
  scale_color_brewer(palette = <span class="hljs-string">"Set1"</span>,
                     name=<span class="hljs-string">"Income group"</span>,
                     breaks=c(<span class="hljs-string">"High income: OECD"</span>,<span class="hljs-string">"High income: non-OECD"</span>,<span class="hljs-string">"Upper middle income"</span>,<span class="hljs-string">"Lower middle income"</span>,<span class="hljs-string">"Low income"</span>))

<span class="hljs-comment"># make interactive version</span>
disease_democ_interactive &lt;- ggplotly(disease_democ_chart, tooltip=<span class="hljs-string">"text"</span>) %&gt;% 
  config(displayModeBar = <span class="hljs-literal">FALSE</span>)

<span class="hljs-comment"># plot the chart</span>
print(disease_democ_interactive)
</code></pre><p>Here’s the static version:</p><p><img src="img/static_charts_r_9.png" alt=""></p><p>And here’s the interactive:</p><iframe width="100%" height="450" frameborder="0" scrolling="no" src="disease_democ2.html"></iframe><p>Notice that the <code>scale_color_brewer</code> code that ordered the items in the legend in the static <strong>ggplot</strong> chart was not inherited by the interactive <strong>plotly</strong> version.</p><p>But we can fix that by first running this code:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;>disease_democ &amp;lt;- disease_democ %&amp;gt;%
  mutate(income_group = factor(income_group, levels = c(&quot;High income: non-OECD&quot;,
                                               &quot;High income: OECD&quot;,
                                               &quot;Upper middle income&quot;,
                                               &quot;Lower middle income&quot;,
                                               &quot;Low income&quot;))) %&amp;gt;%
  arrange(income_group)
</code></pre>">disease_democ &lt;- disease_democ %&gt;%
  mutate(income_group = factor(income_group, levels = c(<span class="hljs-string">"High income: non-OECD"</span>,
                                               <span class="hljs-string">"High income: OECD"</span>,
                                               <span class="hljs-string">"Upper middle income"</span>,
                                               <span class="hljs-string">"Lower middle income"</span>,
                                               <span class="hljs-string">"Low income"</span>))) %&gt;%
  arrange(income_group)
</code></pre><p>This converts <code>income_group</code> into a categorical variable, or <code>factor</code>, and then sorts the data frame in order of its categories, or levels.</p><p>Running the chart code as before will now fix the order of the items in the legend in the interactive chart.</p><iframe width="100%" height="450" frameborder="0" scrolling="no" src="disease_democ3.html"></iframe><h4 id="make-an-interactive-version-of-the-california-kindergarten-immunization-heatmap"><a name="make-an-interactive-version-of-the-california-kindergarten-immunization-heatmap" href="#make-an-interactive-version-of-the-california-kindergarten-immunization-heatmap"></a>Make an interactive version of the California kindergarten immunization heatmap</h4><p>Here’s another example of making an interactive chart with a tooltip:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load data
immun &amp;lt;- read_csv(&quot;kindergarten.csv&quot;)

# calculate percentage incomplete, by county, by year
immun_counties_year &amp;lt;- immun %&amp;gt;%
  group_by(county, start_year) %&amp;gt;%
  summarize(enrolled = sum(enrollment, na.rm = TRUE),
            completed = sum(complete, na.rm = TRUE)) %&amp;gt;%
  mutate(pc_incomplete = round((enrolled-completed)/enrolled*100,2))

# static heat map, all counties, by year
immun_counties_year_chart &amp;lt;- ggplot(immun_counties_year, aes(x = start_year,
                                                             y = county,
                                                             text = paste0(&quot;&amp;lt;b&amp;gt;Year: &amp;lt;/b&amp;gt;&quot;, start_year,&quot;&amp;lt;br&amp;gt;&quot;,
                                                                           &quot;&amp;lt;b&amp;gt;County: &amp;lt;/b&amp;gt;&quot;, county,&quot;&amp;lt;br&amp;gt;&quot;,
                                                                           &quot;&amp;lt;b&amp;gt;% incomplete: &amp;lt;/b&amp;gt;&quot;, pc_incomplete,&quot;&amp;lt;br&amp;gt;&quot;),
                                                             group = 1)) +
  geom_tile(aes(fill = pc_incomplete), color = &quot;white&quot;) +
  scale_fill_gradient(low = &quot;white&quot;,
                      high = &quot;red&quot;,
                      name=&quot;% incomplete&quot;) +
  scale_x_continuous(breaks = c(2002,2004,2006,2008,2010,2012,2014)) +
  theme_minimal(base_size = 12, base_family = &quot;Georgia&quot;) +
  xlab(&quot;&quot;) +
  ylab(&quot;&quot;) +
  theme(panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        legend.position=&quot;bottom&quot;,
        legend.key.height = unit(0.4, &quot;cm&quot;)) +
  ggtitle(&quot;Immunization in California kindergartens, by county&quot;)

plot(immun_counties_year_chart)

# interactive version
immun_counties_year_chart_interactive &amp;lt;- ggplotly(immun_counties_year_chart, tooltip = &quot;text&quot;) %&amp;gt;% 
  config(displayModeBar = FALSE)

print(immun_counties_year_chart_interactive)
</code></pre>"><span class="hljs-comment"># load data</span>
immun &lt;- read_csv(<span class="hljs-string">"kindergarten.csv"</span>)

<span class="hljs-comment"># calculate percentage incomplete, by county, by year</span>
immun_counties_year &lt;- immun %&gt;%
  group_by(county, start_year) %&gt;%
  summarize(enrolled = sum(enrollment, na.rm = <span class="hljs-literal">TRUE</span>),
            completed = sum(complete, na.rm = <span class="hljs-literal">TRUE</span>)) %&gt;%
  mutate(pc_incomplete = round((enrolled-completed)/enrolled*<span class="hljs-number">100</span>,<span class="hljs-number">2</span>))

<span class="hljs-comment"># static heat map, all counties, by year</span>
immun_counties_year_chart &lt;- ggplot(immun_counties_year, aes(x = start_year,
                                                             y = county,
                                                             text = paste0(<span class="hljs-string">"&lt;b&gt;Year: &lt;/b&gt;"</span>, start_year,<span class="hljs-string">"&lt;br&gt;"</span>,
                                                                           <span class="hljs-string">"&lt;b&gt;County: &lt;/b&gt;"</span>, county,<span class="hljs-string">"&lt;br&gt;"</span>,
                                                                           <span class="hljs-string">"&lt;b&gt;% incomplete: &lt;/b&gt;"</span>, pc_incomplete,<span class="hljs-string">"&lt;br&gt;"</span>),
                                                             group = <span class="hljs-number">1</span>)) +
  geom_tile(aes(fill = pc_incomplete), color = <span class="hljs-string">"white"</span>) +
  scale_fill_gradient(low = <span class="hljs-string">"white"</span>,
                      high = <span class="hljs-string">"red"</span>,
                      name=<span class="hljs-string">"% incomplete"</span>) +
  scale_x_continuous(breaks = c(<span class="hljs-number">2002</span>,<span class="hljs-number">2004</span>,<span class="hljs-number">2006</span>,<span class="hljs-number">2008</span>,<span class="hljs-number">2010</span>,<span class="hljs-number">2012</span>,<span class="hljs-number">2014</span>)) +
  theme_minimal(base_size = <span class="hljs-number">12</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  xlab(<span class="hljs-string">""</span>) +
  ylab(<span class="hljs-string">""</span>) +
  theme(panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        legend.position=<span class="hljs-string">"bottom"</span>,
        legend.key.height = unit(<span class="hljs-number">0.4</span>, <span class="hljs-string">"cm"</span>)) +
  ggtitle(<span class="hljs-string">"Immunization in California kindergartens, by county"</span>)

plot(immun_counties_year_chart)

<span class="hljs-comment"># interactive version</span>
immun_counties_year_chart_interactive &lt;- ggplotly(immun_counties_year_chart, tooltip = <span class="hljs-string">"text"</span>) %&gt;% 
  config(displayModeBar = <span class="hljs-literal">FALSE</span>)

print(immun_counties_year_chart_interactive)
</code></pre><p>This should be the result:</p><iframe width="100%" height="750" frameborder="0" scrolling="no" src="immun_heatmap.html"></iframe><h3 id="practice-making-other-interactive-charts"><a name="practice-making-other-interactive-charts" href="#practice-making-other-interactive-charts"></a>Practice making other interactive charts</h3><p>In class, as time allows, we’ll use <strong>plotly</strong> to create interactive versions of these <strong>ggplot2</strong> charts:</p><p><img src="img/static_charts_r_24.png" alt=""></p><p><img src="img/static_charts_r_25.png" alt=""></p><h3 id="make-a-map-of-seismic-risk-and-earthquakes-using-leaflet"><a name="make-a-map-of-seismic-risk-and-earthquakes-using-leaflet" href="#make-a-map-of-seismic-risk-and-earthquakes-using-leaflet"></a>Make a map of seismic risk and earthquakes using Leaflet</h3><p><a href="https://leafletjs.com/">Leaflet</a> is the most widely-used JavaScript library for making interactive online maps. It can be used from R with the <a href="https://rstudio.github.io/leaflet/"><strong>leaflet</strong></a> package, another part of the <strong>htmlwidgets</strong> framework. So we need to install and load that, together with a package called <strong><a href="https://cran.r-project.org/web/packages/rgdal/rgdal.pdf">rgdal</a></strong>, which makes it possible to load shapefiles and other geodata into R.</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># install and load leaflet and rdgal
install.packages(&quot;leaflet&quot;)
install.packages(&quot;rgdal&quot;)
library(leaflet)
library(rgdal)
</code></pre>"><span class="hljs-comment"># install and load leaflet and rdgal</span>
install.packages(<span class="hljs-string">"leaflet"</span>)
install.packages(<span class="hljs-string">"rgdal"</span>)
<span class="hljs-keyword">library</span>(leaflet)
<span class="hljs-keyword">library</span>(rgdal)
</code></pre><p>First let’s see how to make a basic Leaflet map, centered on Santa Cruz:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># make leaflet map centered on Santa Cruz
leaflet() %&amp;gt;% 
  setView(lng = -122.0825853, lat = 36.9758862, zoom = 11) %&amp;gt;%
  addTiles()
</code></pre>"><span class="hljs-comment"># make leaflet map centered on Santa Cruz</span>
leaflet() %&gt;% 
  setView(lng = -<span class="hljs-number">122.0825853</span>, lat = <span class="hljs-number">36.9758862</span>, zoom = <span class="hljs-number">11</span>) %&gt;%
  addTiles()
</code></pre><p>This map should appear in the <code>Viewer</code>:</p><iframe width="100%" height="450" frameborder="0" scrolling="no" src="santacruz1.html"></iframe><p>The <code>leaflet</code> function creates a leaflet map.</p><p>The <code>setView</code> function sets the starting position of the map, centering it on the defined coordinates and with the defined zoom level; <code>addTiles</code> adds <a href="https://www.openstreetmap.org/">OpenStreetMap</a> tiles to the map, which would otherwise be blank. Notice that the map is interactive, and can be panned and zoomed just like a Google Map.</p><p>We aren’t limited to using OpenStreetMap tiles:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># make leaflet map centered on Santa Cruz with Carto tiles
leaflet() %&amp;gt;%
  setView(lng = -122.0825853, lat = 36.9758862, zoom = 11) %&amp;gt;%
  addProviderTiles(&quot;CartoDB.Positron&quot;)
</code></pre>"><span class="hljs-comment"># make leaflet map centered on Santa Cruz with Carto tiles</span>
leaflet() %&gt;%
  setView(lng = -<span class="hljs-number">122.0825853</span>, lat = <span class="hljs-number">36.9758862</span>, zoom = <span class="hljs-number">11</span>) %&gt;%
  addProviderTiles(<span class="hljs-string">"CartoDB.Positron"</span>)
</code></pre><p>The map should now look like this:</p><iframe width="100%" height="450" frameborder="0" scrolling="no" src="santacruz2.html"></iframe><p>The <code>addProviderTiles</code> function uses the <a href="https://github.com/leaflet-extras/leaflet-providers">Leaflet Providers</a> plugin to add various tiles to a map. You can see the available options <a href="https://leaflet-extras.github.io/leaflet-providers/preview/">here</a>.</p><p>Now load the data we need to make the earthquakes map, starting with the <code>seismic</code> shapefile, using the <code>readOGR</code> function from <strong>rgdal</strong>.</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load seismic risk shapefile
seismic &amp;lt;- readOGR(&quot;seismic&quot;, &quot;seismic&quot;)
</code></pre>"><span class="hljs-comment"># load seismic risk shapefile</span>
seismic &lt;- readOGR(<span class="hljs-string">"seismic"</span>, <span class="hljs-string">"seismic"</span>)
</code></pre><p>The two mentions of <code>seismic</code> refer to the folder and the shapefile within it, respectively.</p><p>You should now have in your environment an object called <code>seismic</code> which is a <code>SpatialPolygonsDataFrame</code>.</p><p>We can also load data on earthquakes, directly from the US Geological Survey earthquakes API, described in the notes for the class on finding and downloading data:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load quakes data from USGS earthquakes API
quakes &amp;lt;- read_csv(&quot;https://earthquake.usgs.gov/fdsnws/event/1/query?starttime=1960-01-01T00:00:00&amp;amp;minmagnitude=6&amp;amp;format=csv&amp;amp;latitude=39.828175&amp;amp;longitude=-98.5795&amp;amp;maxradiuskm=6000&amp;amp;orderby=magnitude&quot;)
</code></pre>"><span class="hljs-comment"># load quakes data from USGS earthquakes API</span>
quakes &lt;- read_csv(<span class="hljs-string">"https://earthquake.usgs.gov/fdsnws/event/1/query?starttime=1960-01-01T00:00:00&amp;minmagnitude=6&amp;format=csv&amp;latitude=39.828175&amp;longitude=-98.5795&amp;maxradiuskm=6000&amp;orderby=magnitude"</span>)
</code></pre><p>Using this url, we have loaded earthquakes since the start of 1960 that had a magnitude of 6 and above, within a 6,000 kilometer radius of the geographic center of the continental United States.</p><p>Let’s look at a summary of the <code>seismic</code> data:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># view summary of seismic_risk data
summary(seismic)
</code></pre>"><span class="hljs-comment"># view summary of seismic_risk data</span>
summary(seismic)
</code></pre><p>This should be returned in the R Console:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;>Object of class SpatialPolygonsDataFrame
Coordinates:
      min       max
x -124.71 -66.98701
y   24.60  49.36968
Is projected: FALSE 
proj4string :
[+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0]
Data attributes:
   ValueRange
 &amp;lt; 1    : 3  
 1 - 2  :12  
 10 - 12: 2  
 2 - 5  : 8  
 5 - 10 : 4
</code></pre>">Object of class SpatialPolygonsDataFrame
Coordinates:
      min       max
x -<span class="hljs-number">124.71</span> -<span class="hljs-number">66.98701</span>
y   <span class="hljs-number">24.60</span>  <span class="hljs-number">49.36968</span>
Is projected: <span class="hljs-literal">FALSE</span> 
proj4string :
[+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]
Data attributes:
   ValueRange
 &lt; <span class="hljs-number">1</span>    : <span class="hljs-number">3</span>  
 <span class="hljs-number">1</span> - <span class="hljs-number">2</span>  :<span class="hljs-number">12</span>  
 <span class="hljs-number">10</span> - <span class="hljs-number">12</span>: <span class="hljs-number">2</span>  
 <span class="hljs-number">2</span> - <span class="hljs-number">5</span>  : <span class="hljs-number">8</span>  
 <span class="hljs-number">5</span> - <span class="hljs-number">10</span> : <span class="hljs-number">4</span>
</code></pre><p>The data defining the annual risk of a damaging earthquake is in the variable <code>ValueRange</code>. But the categories of this binned variable are not in the right order. To correct that, we should convert the variable from text to a <code>factor</code>, or categorical variable, with its <code>levels</code> in the right order.</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># convert to factor/categorical variable
seismic@data &amp;lt;- seismic@data %&amp;gt;%
  mutate(ValueRange = factor(ValueRange, levels = c(&quot;&amp;lt; 1&quot;,&quot;1 - 2&quot;,&quot;2 - 5&quot;,&quot;5 - 10&quot;, &quot;10 - 12&quot;)))

# view summary of seismic_risk data
summary(seismic)
</code></pre>"><span class="hljs-comment"># convert to factor/categorical variable</span>
seismic@data &lt;- seismic@data %&gt;%
  mutate(ValueRange = factor(ValueRange, levels = c(<span class="hljs-string">"&lt; 1"</span>,<span class="hljs-string">"1 - 2"</span>,<span class="hljs-string">"2 - 5"</span>,<span class="hljs-string">"5 - 10"</span>, <span class="hljs-string">"10 - 12"</span>)))

<span class="hljs-comment"># view summary of seismic_risk data</span>
summary(seismic)
</code></pre><p>Now the categories should be in the correct order:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;>Object of class SpatialPolygonsDataFrame
Coordinates:
      min       max
x -124.71 -66.98701
y   24.60  49.36968
Is projected: FALSE 
proj4string :
[+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0]
Data attributes:
   ValueRange
 &amp;lt; 1    : 3  
 1 - 2  :12  
 2 - 5  : 8  
 5 - 10 : 4  
 10 - 12: 2
</code></pre>">Object of class SpatialPolygonsDataFrame
Coordinates:
      min       max
x -<span class="hljs-number">124.71</span> -<span class="hljs-number">66.98701</span>
y   <span class="hljs-number">24.60</span>  <span class="hljs-number">49.36968</span>
Is projected: <span class="hljs-literal">FALSE</span> 
proj4string :
[+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]
Data attributes:
   ValueRange
 &lt; <span class="hljs-number">1</span>    : <span class="hljs-number">3</span>  
 <span class="hljs-number">1</span> - <span class="hljs-number">2</span>  :<span class="hljs-number">12</span>  
 <span class="hljs-number">2</span> - <span class="hljs-number">5</span>  : <span class="hljs-number">8</span>  
 <span class="hljs-number">5</span> - <span class="hljs-number">10</span> : <span class="hljs-number">4</span>  
 <span class="hljs-number">10</span> - <span class="hljs-number">12</span>: <span class="hljs-number">2</span>
</code></pre><p>Notice that to run <strong>dplyr</strong> code to <code>mutate</code></p><p>Next we will load the seismic risk data into a leaflet map:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load the seismic risk data into a leaflet map
seismic_map &amp;lt;- leaflet(data = seismic)
</code></pre>"><span class="hljs-comment"># load the seismic risk data into a leaflet map</span>
seismic_map &lt;- leaflet(data = seismic)
</code></pre><p>You should now see an object of type <code>leaflet</code> in your environment.</p><p>Now we can make a map with two layers just a few lines of code:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># set color palette
pal &amp;lt;- colorFactor(&quot;Reds&quot;, seismic$ValueRange)

# plot map
seismic_map %&amp;gt;%
  setView(lng = -98.5795, lat = 39.828175, zoom = 4) %&amp;gt;%
  addProviderTiles(&quot;CartoDB.Positron&quot;) %&amp;gt;% 
  addPolygons(
    stroke = FALSE,
    fillOpacity = 0.7,
    smoothFactor = 0.1,
    color = ~pal(ValueRange)
  ) %&amp;gt;%
  # add historical earthquakes
  addCircles(
    data = quakes, 
    radius = sqrt(10^quakes$mag)*30, 
    color = &quot;#000000&quot;,
    weight = 0.2,
    fillColor =&quot;#ffffff&quot;,
    fillOpacity = 0.5,
    popup = paste0(&quot;&amp;lt;strong&amp;gt;Magnitude: &amp;lt;/strong&amp;gt;&quot;, quakes$mag, &quot;&amp;lt;/br&amp;gt;&quot;,
                   &quot;&amp;lt;strong&amp;gt;Date: &amp;lt;/strong&amp;gt;&quot;, format(as.Date(quakes$time), &quot;%b %d, %Y&quot;))
  ) %&amp;gt;%
  # add legend
  addLegend(
    &quot;bottomright&quot;, pal = pal, values = ~ValueRange,
    title = &quot;annual % risk of damaging quake&quot;,
    opacity = 0.7,
    labels = labels
  )
</code></pre>"><span class="hljs-comment"># set color palette</span>
pal &lt;- colorFactor(<span class="hljs-string">"Reds"</span>, seismic$ValueRange)

<span class="hljs-comment"># plot map</span>
seismic_map %&gt;%
  setView(lng = -<span class="hljs-number">98.5795</span>, lat = <span class="hljs-number">39.828175</span>, zoom = <span class="hljs-number">4</span>) %&gt;%
  addProviderTiles(<span class="hljs-string">"CartoDB.Positron"</span>) %&gt;% 
  addPolygons(
    stroke = <span class="hljs-literal">FALSE</span>,
    fillOpacity = <span class="hljs-number">0.7</span>,
    smoothFactor = <span class="hljs-number">0.1</span>,
    color = ~pal(ValueRange)
  ) %&gt;%
  <span class="hljs-comment"># add historical earthquakes</span>
  addCircles(
    data = quakes, 
    radius = sqrt(<span class="hljs-number">10</span>^quakes$mag)*<span class="hljs-number">30</span>, 
    color = <span class="hljs-string">"#000000"</span>,
    weight = <span class="hljs-number">0.2</span>,
    fillColor =<span class="hljs-string">"#ffffff"</span>,
    fillOpacity = <span class="hljs-number">0.5</span>,
    popup = paste0(<span class="hljs-string">"&lt;strong&gt;Magnitude: &lt;/strong&gt;"</span>, quakes$mag, <span class="hljs-string">"&lt;/br&gt;"</span>,
                   <span class="hljs-string">"&lt;strong&gt;Date: &lt;/strong&gt;"</span>, format(as.Date(quakes$time), <span class="hljs-string">"%b %d, %Y"</span>))
  ) %&gt;%
  <span class="hljs-comment"># add legend</span>
  addLegend(
    <span class="hljs-string">"bottomright"</span>, pal = pal, values = ~ValueRange,
    title = <span class="hljs-string">"annual % risk of damaging quake"</span>,
    opacity = <span class="hljs-number">0.7</span>,
    labels = labels
  )
</code></pre><p>This should be the result:</p><iframe width="100%" height="450" frameborder="0" scrolling="no" src="earthquakes.html"></iframe><p>The function <code>colorFactor</code> assigns a named ColorBrewer palette to a categorical variable.</p><p>The function <code>addPolygons</code> adds polygons to the map: <code>stroke = FALSE</code> gives them no outline; <code>fillOpacity = 0.7</code> makes them slightly transparent; <code>color = ~pal(ValueRange))</code> uses the palette to color the polygons according to values in the <code>ValueRange</code> data.</p><p>(To see how to set up a color palette for a continuous variable, see <a href="https://paldhous.github.io/ucb/2016/dataviz/week13.html">this class</a>.)</p><p><code>smoothFactor</code> controls the extent to which the polygons are simplified. See what happens to the map if you replace <code>0.1</code> with <code>10</code>. Simplified polygons will load more quickly, but there’s a trade-off with the appearance of the map. Choose an appropriate value for your maps through trial and error.</p><p><code>addCircles</code> adds circles to the map, using the <code>quakes</code> data; <code>color</code> sets the color for their outlines, while <code>weight</code> sets the thickness of these lines; <code>fillColor</code> and <code>fillOpacity</code> style the circles’ interiors.</p><p>The size of the circles is set by <code>radius = sqrt(quakes$mag^10)*30</code>. Here <code>30</code> is simply a scaling factor for all of the circles, set by trial and error to give a reasonable appearance on the map. The size of the circles is set from the variable <code>mag</code> in the quakes data, which is their magnitude. We have raised 10 to the power of these magnitude values: As we discussed previously, this is a quirk of working with earthquake magnitudes, which are on a logarithmic scale, so that a magnitude difference of 1 corresponds to a 10-fold difference in earth movement, as recorded on a seismogram.</p><p>When scaling circles to make a Leaflet map, use the values from the data, but always take their square roots, using the <code>sqrt</code> function. This is important, to ensure that the circles are scaled correctly, by area, rather than by radius. The code sets the diameter (or twice the radius) of the circles, so the <code>sqrt</code> is necessary to correct for the squaring of these values in the equation for the area of a circle: <code>Area = π * r^2</code>.</p><p><code>popup</code> is used to define the HTML code the appears in the popup that appears when any quake is clicked or tapped. The code above again uses <code>paste0</code> to concatenate a series of elements, separated by commas, that will write the HTML. They include the <code>mag</code> and <code>time</code> values from the quakes data, the latter being formatted as an easy-to-read date using R’s <code>format</code> function for dates. See <a href="https://www.statmethods.net/input/dates.html">here</a> for more on formatting dates in R.</p><p>I hope these examples illustrate the potential of <strong>htmlwidgets</strong>. There are many more which we have not covered. Understanding how the code for each will take some time. But if you follow the documentation, the results can be impressive.</p><h3 id="further-reading/resources"><a name="further-reading/resources" href="#further-reading/resources"></a>Further reading/resources</h3><p><a href="https://www.htmlwidgets.org/showcase_leaflet.html">htmlwidgets Showcase</a><br>Links to documentation and code examples for the leading htmlwidgets.</p><p><a href="https://gallery.htmlwidgets.org/">htmlwidgets Gallery</a><br>A more extensive collection of htmlwidgets</p><p><a href="https://plot.ly/ggplot2/">Plotly with ggplot2</a></p><p><a href="https://plot.ly/r/">Plotly for R</a><br>Look here for more options to customize your charts, including <a href="https://plot.ly/r/#layout-options">layout options</a> like formatting tooltips. Note, you can also make charts directly in R without going through ggplot2.</p>

	</div> <!-- /.container all -->
	<script src="http://code.jquery.com/jquery.min.js"></script>
	<script src="../../js/bootstrap.min.js"></script>
</body>
</html>
