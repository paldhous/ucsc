<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>animations-r.html</title>
  <meta name="generator" content="Haroopad 0.13.1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF);background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:5px -27px no-repeat #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:#FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:#EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:#75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:1px solid #1A3C6C;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin:0;max-width:none;min-height:0;outline:#112644 0;overflow-x:visible;overflow-y:visible;padding:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}.mermaid .label{color:#333}.node circle,.node polygon,.node rect{fill:#cde498;stroke:#13540c;stroke-width:1px}.edgePath .path{stroke:green;stroke-width:1.5px}.cluster rect{fill:#cdffb2;rx:40;stroke:#6eaa49;stroke-width:1px}.cluster text{fill:#333}.actor{stroke:#13540c;fill:#cde498}text.actor{fill:#000;stroke:none}.actor-line{stroke:grey}.messageLine0{stroke-width:1.5;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#333}.messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#arrowhead{fill:#333}#crosshead path{fill:#333!important;stroke:#333!important}.messageText{fill:#333;stroke:none}.labelBox{stroke:#326932;fill:#cde498}.labelText,.loopText{fill:#000;stroke:none}.loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#326932}.note{stroke:#6eaa49;fill:#fff5ad}.noteText{fill:#000;stroke:none;font-family:'trebuchet ms',verdana,arial;font-size:14px}.section{stroke:none;opacity:.2}.section0,.section2{fill:#6eaa49}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:#333}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:lightgrey;opacity:.3;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:red;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle;font-size:11px}.taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:#487e3a;stroke:#13540c}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:#000}.active0,.active1,.active2,.active3{fill:#cde498;stroke:#13540c}.activeText0,.activeText1,.activeText2,.activeText3{fill:#000!important}.done0,.done1,.done2,.done3{stroke:grey;fill:lightgrey;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:#000!important}.crit0,.crit1,.crit2,.crit3{stroke:#f88;fill:red;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#f88;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:#000!important}.titleText{text-anchor:middle;font-size:18px;fill:#000}text{font-family:'trebuchet ms',verdana,arial;font-size:14px}html{height:100%}body{margin:0!important;padding:5px 20px 26px!important;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x;border:0;height:3px;padding:0}hr.underscore{border-top-style:dashed!important}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:url(../img/ajax.gif) center center no-repeat #fff}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}p.toc{margin:0!important}p.toc ul{padding-left:10px}p.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}p.toc li,p.toc ul{list-style-type:none}p.toc li{width:100%;padding:0;overflow:hidden}p.toc li a::after{content:"."}p.toc li a:before{content:"• "}p.toc h5{text-transform:uppercase}p.toc .title{float:left;padding-right:3px}p.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}input.task-list-item{margin-left:-1.62em}.markdown{font-family:"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Lucida Grande","Lucida Sans Unicode","Lucida Sans",'Segoe UI',AppleSDGothicNeo-Medium,'Malgun Gothic',Verdana,Tahoma,sans-serif;padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-wrap:break-word}.markdown pre{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;overflow:auto;padding:.5em}.markdown pre code{border:0;display:block}.markdown pre>code{font-family:Consolas,Inconsolata,Courier,monospace;font-weight:700;white-space:pre;margin:0}.markdown code{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown mark{color:#000;background-color:#fcf8e3}.markdown table{padding:0;border-collapse:collapse;border-spacing:0;margin-bottom:16px}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.github{padding:20px;font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Segoe UI",AppleSDGothicNeo-Medium,'Malgun Gothic',Arial,freesans,sans-serif;font-size:15px;background:#fff;line-height:1.6;-webkit-font-smoothing:antialiased}.github a{color:#3269a0}.github a:hover{color:#4183c4}.github h2{border-bottom:1px solid #e6e6e6;line-height:1.6}.github h6{color:#777}.github hr{border:1px solid #e6e6e6}.github pre>code{font-size:.9em;font-family:Consolas,Inconsolata,Courier,monospace}.github blockquote>code,.github h1>code,.github h2>code,.github h3>code,.github h4>code,.github h5>code,.github h6>code,.github li>code,.github p>code,.github td>code{background-color:rgba(0,0,0,.07);font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:85%;padding:.2em .5em;border:0}.github blockquote{border-left:4px solid #e6e6e6;padding:0 15px;font-style:italic}.github table{background-color:#fafafa}.github table tr td,.github table tr th{border:1px solid #e6e6e6}.github table tr:nth-child(2n){background-color:#f2f2f2}.hljs{display:block;overflow-x:auto;padding:.5em;background:#fdf6e3;color:#657b83;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment,.hljs-doctype,.hljs-javadoc,.hljs-pi,.lisp .hljs-string{color:#93a1a1}.css .hljs-tag,.hljs-addition,.hljs-keyword,.hljs-request,.hljs-status,.hljs-winutils,.method,.nginx .hljs-title{color:#859900}.hljs-command,.hljs-dartdoc,.hljs-hexcolor,.hljs-link_url,.hljs-number,.hljs-phpdoc,.hljs-regexp,.hljs-rules .hljs-value,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#2aa198}.css .hljs-function,.hljs-built_in,.hljs-chunk,.hljs-decorator,.hljs-id,.hljs-identifier,.hljs-localvars,.hljs-title,.vhdl .hljs-literal{color:#268bd2}.hljs-attribute,.hljs-class .hljs-title,.hljs-constant,.hljs-link_reference,.hljs-parent,.hljs-type,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number{color:#b58900}.css .hljs-pseudo,.diff .hljs-change,.hljs-attr_selector,.hljs-cdata,.hljs-header,.hljs-pragma,.hljs-preprocessor,.hljs-preprocessor .hljs-keyword,.hljs-shebang,.hljs-special,.hljs-subst,.hljs-symbol,.hljs-symbol .hljs-string{color:#cb4b16}.hljs-deletion,.hljs-important{color:#dc322f}.hljs-link_label{color:#6c71c4}.tex .hljs-formula{background:#eee8d5}.MathJax_Hover_Frame{border-radius:.25em;-webkit-border-radius:.25em;-moz-border-radius:.25em;-khtml-border-radius:.25em;box-shadow:0 0 15px #83A;-webkit-box-shadow:0 0 15px #83A;-moz-box-shadow:0 0 15px #83A;-khtml-box-shadow:0 0 15px #83A;border:1px solid #A6D!important;display:inline-block;position:absolute}.MathJax_Hover_Arrow{position:absolute;width:15px;height:11px;cursor:pointer}#MathJax_About{position:fixed;left:50%;width:auto;text-align:center;border:3px outset;padding:1em 2em;background-color:#DDD;color:#000;cursor:default;font-family:message-box;font-size:120%;font-style:normal;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:15px;-webkit-border-radius:15px;-moz-border-radius:15px;-khtml-border-radius:15px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_Menu{position:absolute;background-color:#fff;color:#000;width:auto;padding:5px 0;border:1px solid #CCC;margin:0;cursor:default;font:menu;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px;-khtml-border-radius:5px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_MenuItem{padding:1px 2em;background:0 0}.MathJax_MenuArrow{position:absolute;right:.5em;color:#666}.MathJax_MenuActive .MathJax_MenuArrow{color:#fff}.MathJax_MenuArrow.RTL{left:.5em;right:auto}.MathJax_MenuCheck{position:absolute;left:.7em}.MathJax_MenuCheck.RTL{right:.7em;left:auto}.MathJax_MenuRadioCheck{position:absolute;left:.7em}.MathJax_MenuRadioCheck.RTL{right:.7em;left:auto}.MathJax_MenuLabel{padding:1px 2em 3px 1.33em;font-style:italic}.MathJax_MenuRule{border-top:1px solid #DDD;margin:4px 3px}.MathJax_MenuDisabled{color:GrayText}.MathJax_MenuActive{background-color:#606872;color:#fff}.MathJax_Menu_Close{position:absolute;width:31px;height:31px;top:-15px;left:-15px}#MathJax_Zoom{position:absolute;background-color:#F0F0F0;overflow:auto;display:block;z-index:301;padding:.5em;border:1px solid #000;margin:0;font-weight:400;font-style:normal;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;box-shadow:5px 5px 15px #AAA;-webkit-box-shadow:5px 5px 15px #AAA;-moz-box-shadow:5px 5px 15px #AAA;-khtml-box-shadow:5px 5px 15px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}#MathJax_ZoomOverlay{position:absolute;left:0;top:0;z-index:300;display:inline-block;width:100%;height:100%;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_ZoomFrame{position:relative;display:inline-block;height:0;width:0}#MathJax_ZoomEventTrap{position:absolute;left:0;top:0;z-index:302;display:inline-block;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}.MathJax_Preview{color:#888}#MathJax_Message{position:fixed;left:1px;bottom:2px;background-color:#E6E6E6;border:1px solid #959595;margin:0;padding:2px 8px;z-index:102;color:#000;font-size:80%;width:auto;white-space:nowrap}#MathJax_MSIE_Frame{position:absolute;top:0;left:0;width:0;z-index:101;border:0;margin:0;padding:0}.MathJax_Error{color:#C00;font-style:italic}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown github">
<h1 id="iteration-and-animation:-gifs-and-videos"><a name="iteration-and-animation:-gifs-and-videos" href="#iteration-and-animation:-gifs-and-videos"></a>Iteration and animation: GIFs and videos</h1><p>In today’s class, we will make animated GIFs and videos from charts made in R with <strong>ggplot2</strong>, using the <a href="https://gganimate.com"><strong>gganimate</strong></a> package.</p><h3 id="the-data-we-will-use-today"><a name="the-data-we-will-use-today" href="#the-data-we-will-use-today"></a>The data we will use today</h3><p>Download the data for this session from <a href="data/animations-r.zip">here</a>, unzip the folder and place it on your desktop. It contains the following folders and files:</p><ul>
<li><code>nations.csv</code> Data from the World Bank Indicators portal, as used in week 3 and subsequently.</li><li><code>warming.csv</code> <a href="https://www.ncdc.noaa.gov/cag/global/time-series/globe/land_ocean/ytd/12/1880-2017.csv">National Oceanic and Atmospheric Administration data</a> on the annual average global temperature, from 1880 to 2017.<ul>
<li><code>year</code></li><li><code>value</code> Average global temperature, compared to average from 1900-2000.</li></ul>
</li><li><code>simulations.csv</code> Data from NASA simulations of historical temperatures, estimating the effect of natural and human influences on climate, processed from the <a href="https://www.bloomberg.com/graphics/2015-whats-warming-the-world/data/forcings.csv">raw data</a> used for this <a href="https://www.bloomberg.com/graphics/2015-whats-warming-the-world/">piece from Bloomberg News</a>. Contains the following variables:<ul>
<li><code>year</code></li><li><code>type</code> Natural or Human</li><li><code>value</code> Global average temperature from the simulation, relative to average simulated value from 1990-2000.</li></ul>
</li></ul><h3 id="setting-up"><a name="setting-up" href="#setting-up"></a>Setting up</h3><p>Launch RStudio Cloud, upload the zipped folder with the data, and save a new R script as <code>animations.R</code>.</p><h4 id="install-gganimate-and-other-packages-on-which-it-depends"><a name="install-gganimate-and-other-packages-on-which-it-depends" href="#install-gganimate-and-other-packages-on-which-it-depends"></a>Install gganimate and other packages on which it depends</h4><p>From the <code>Packages</code> panel, install the following packages: <strong>gganimate</strong>, <strong>transformr</strong>, <strong>gifski</strong>, <strong>png</strong>.</p><p>You can install them in one go, separated by spaces or commas. Make sure to have <code>Install dependencies</code> chacked.</p><h4 id="load-the-packages-we-will-use-today"><a name="load-the-packages-we-will-use-today" href="#load-the-packages-we-will-use-today"></a>Load the packages we will use today</h4><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load required packages
library(readr)
library(ggplot2)
library(gganimate)
library(scales)
library(dplyr)
</code></pre>"><span class="hljs-comment"># load required packages</span>
<span class="hljs-keyword">library</span>(readr)
<span class="hljs-keyword">library</span>(ggplot2)
<span class="hljs-keyword">library</span>(gganimate)
<span class="hljs-keyword">library</span>(scales)
<span class="hljs-keyword">library</span>(dplyr)
</code></pre><p>Apart from <strong>gganimate</strong>, we have encountered all of these packages in previous weeks.</p><h3 id="make-a-gapminder-style-animated-bubble-chart"><a name="make-a-gapminder-style-animated-bubble-chart" href="#make-a-gapminder-style-animated-bubble-chart"></a>Make a Gapminder-style animated bubble chart</h3><p>The notes from the static charts class show how to make the following chart, showing GDP per capita, life expectancy at birth and population for the world’s nations in 2016:</p><p><img src="img/static_charts_r_21.png" alt=""></p><p>This was the code to generate that chart:</p><pre class="r hljs"><code class="r" data-origin="<pre><code class=&quot;r&quot;># load data
nations &amp;lt;- read_csv(&quot;animations-r/nations.csv&quot;)

# make sure that year is treated as an integer
nations &amp;lt;- nations %&amp;gt;%
    mutate(year = as.integer(year))

# filter for 2016 data only
nations2016 &amp;lt;- nations %&amp;gt;%
  filter(year == 2016)

# make bubble chart
ggplot(nations2016, aes(x = gdp_percap, y = life_expect)) +
  xlab(&quot;GDP per capita&quot;) +
  ylab(&quot;Life expectancy at birth&quot;) +
  theme_minimal(base_size = 14, base_family = &quot;Georgia&quot;) +
  geom_point(aes(size = population, color = region), alpha = 0.7) +
  scale_size_area(guide = FALSE, max_size = 15) +
  scale_x_continuous(labels = dollar) +
  stat_smooth(formula = y ~ log10(x), se = FALSE, size = 0.5, color = &quot;black&quot;, linetype=&quot;dotted&quot;) +
  scale_color_brewer(name = &quot;&quot;, palette = &quot;Set2&quot;) +
  theme(legend.position=c(0.8,0.4))
</code></pre>"><span class="hljs-comment"># load data</span>
nations &lt;- read_csv(<span class="hljs-string">"animations-r/nations.csv"</span>)

<span class="hljs-comment"># make sure that year is treated as an integer</span>
nations &lt;- nations %&gt;%
    mutate(year = as.integer(year))

<span class="hljs-comment"># filter for 2016 data only</span>
nations2016 &lt;- nations %&gt;%
  filter(year == <span class="hljs-number">2016</span>)

<span class="hljs-comment"># make bubble chart</span>
ggplot(nations2016, aes(x = gdp_percap, y = life_expect)) +
  xlab(<span class="hljs-string">"GDP per capita"</span>) +
  ylab(<span class="hljs-string">"Life expectancy at birth"</span>) +
  theme_minimal(base_size = <span class="hljs-number">14</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  geom_point(aes(size = population, color = region), alpha = <span class="hljs-number">0.7</span>) +
  scale_size_area(guide = <span class="hljs-literal">FALSE</span>, max_size = <span class="hljs-number">15</span>) +
  scale_x_continuous(labels = dollar) +
  stat_smooth(formula = y ~ log10(x), se = <span class="hljs-literal">FALSE</span>, size = <span class="hljs-number">0.5</span>, color = <span class="hljs-string">"black"</span>, linetype=<span class="hljs-string">"dotted"</span>) +
  scale_color_brewer(name = <span class="hljs-string">""</span>, palette = <span class="hljs-string">"Set2"</span>) +
  theme(legend.position=c(<span class="hljs-number">0.8</span>,<span class="hljs-number">0.4</span>))
</code></pre><p>Some reminders about what this code does:</p><ul>
<li><p><code>scale_size_area</code> ensures that the size of the circles scales by their area according to the population data, up to the specified <code>max_size</code>; <code>guide = FALSE</code> within the brackets of this function prevents a legend for size being drawn.</p>
</li><li><p><code>labels = dollar</code> from <strong>scales</strong> formats the X axis labels as currency in dollars.</p>
</li><li><p><code>stat_smooth</code> works like <code>geom_smooth</code> but allows you to use a <code>formula</code> to specify the type of curve to use for to trend line fitted to the data, here a logarithmic curve.</p>
</li></ul><p>Now we will use <strong>gganimate</strong> to generate an animation of the chart, from 1990 to 2016. Here is the code:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># animate entire time series with gganimate
nations_plot &amp;lt;- ggplot(nations, aes(x = gdp_percap, y = life_expect)) +
  xlab(&quot;GDP per capita&quot;) +
  ylab(&quot;Life expectancy at birth&quot;) +
  theme_minimal(base_size = 14, base_family = &quot;Georgia&quot;) +
  geom_point(aes(size = population, color = region), alpha = 0.7) +
  scale_size_area(guide = FALSE, max_size = 15) +
  scale_x_continuous(labels = dollar) +
  stat_smooth(formula = y ~ log10(x), se = FALSE, size = 0.5, color = &quot;black&quot;, linetype=&quot;dotted&quot;) +
  scale_color_brewer(name = &quot;&quot;, palette = &quot;Set2&quot;) +
  theme(legend.position=c(0.8,0.4)) +
  # gganimate code
  ggtitle(&quot;{frame_time}&quot;) +
  transition_time(year) +
  ease_aes(&quot;linear&quot;) +
  enter_fade() +
  exit_fade()
</code></pre>"><span class="hljs-comment"># animate entire time series with gganimate</span>
nations_plot &lt;- ggplot(nations, aes(x = gdp_percap, y = life_expect)) +
  xlab(<span class="hljs-string">"GDP per capita"</span>) +
  ylab(<span class="hljs-string">"Life expectancy at birth"</span>) +
  theme_minimal(base_size = <span class="hljs-number">14</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  geom_point(aes(size = population, color = region), alpha = <span class="hljs-number">0.7</span>) +
  scale_size_area(guide = <span class="hljs-literal">FALSE</span>, max_size = <span class="hljs-number">15</span>) +
  scale_x_continuous(labels = dollar) +
  stat_smooth(formula = y ~ log10(x), se = <span class="hljs-literal">FALSE</span>, size = <span class="hljs-number">0.5</span>, color = <span class="hljs-string">"black"</span>, linetype=<span class="hljs-string">"dotted"</span>) +
  scale_color_brewer(name = <span class="hljs-string">""</span>, palette = <span class="hljs-string">"Set2"</span>) +
  theme(legend.position=c(<span class="hljs-number">0.8</span>,<span class="hljs-number">0.4</span>)) +
  <span class="hljs-comment"># gganimate code</span>
  ggtitle(<span class="hljs-string">"{frame_time}"</span>) +
  transition_time(year) +
  ease_aes(<span class="hljs-string">"linear"</span>) +
  enter_fade() +
  exit_fade()
</code></pre><p>Running this code will create an R object of type <code>gganim</code> called <code>nations_plot</code>.</p><p>Now display it in the <code>Viewer</code> panel by running the following:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;>animate(nations_plot)
</code></pre>">animate(nations_plot)
</code></pre><h4 id="how-the-gganimate-code-works"><a name="how-the-gganimate-code-works" href="#how-the-gganimate-code-works"></a>How the gganimate code works</h4><ul>
<li><code>transition_time</code> This function animates the data by <code>year</code>, showing only the data that is relevant for any one point in time. As well as generating a frame for each year, it also generates intermediate frames to give a smooth animation.</li><li>Using <code>"{frame_time}"</code> within the <code>ggtitle</code> function puts a title on each frame with the corresponding value from the variable in the <code>transition_time</code> function, here <code>year</code>. (The earlier conversion of <code>year</code> to integer ensures that we don’t see decimal fractions in this title.)</li><li><code>ease_aes</code> This controls how the animation progresses. If animating over a time series, always use the option <code>"linear"</code> to ensure a constant speed for the animation. Other available options can be used when animating between different states of a chart, rather than over time, as we will see below.</li><li><code>enter_fade</code> <code>exit_fade</code> These functions control the behavior where a data point appears or disappears from the animation. You can also use <code>enter_shrink</code> and <code>exit_shrink</code>.</li></ul><h4 id="save-as-a-gif-and-a-video"><a name="save-as-a-gif-and-a-video" href="#save-as-a-gif-and-a-video"></a>Save as a GIF and a video</h4><p>We can now save the animation as a GIF or video.</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># save as a GIF
animate(nations_plot, fps = 10, end_pause = 30, width = 750, height = 450)
anim_save(&quot;nations.gif&quot;)

# save as a video
animate(nations_plot, renderer = ffmpeg_renderer(), fps = 30, duration = 20, width = 800, height = 450)
anim_save(&quot;nations.mp4&quot;)
</code></pre>"><span class="hljs-comment"># save as a GIF</span>
animate(nations_plot, fps = <span class="hljs-number">10</span>, end_pause = <span class="hljs-number">30</span>, width = <span class="hljs-number">750</span>, height = <span class="hljs-number">450</span>)
anim_save(<span class="hljs-string">"nations.gif"</span>)

<span class="hljs-comment"># save as a video</span>
animate(nations_plot, renderer = ffmpeg_renderer(), fps = <span class="hljs-number">30</span>, duration = <span class="hljs-number">20</span>, width = <span class="hljs-number">800</span>, height = <span class="hljs-number">450</span>)
anim_save(<span class="hljs-string">"nations.mp4"</span>)
</code></pre><p>You can use the options <code>width</code> and <code>height</code> to set the dimensions, in pixels, of the animation; <code>fps</code> sets the frame rate, in frames per second; for a GIF, you can add a pause at the end using <code>end_pause</code>, here set to 30 frames or 3 seconds at 10 frames a second.</p><p>To make a video, you need the code <code>renderer = ffmpeg_renderer()</code>; <code>duration</code> sets the duration of the video. The video code above also sets the ratio between width and height at 16:9, consistent with YouTube format.</p><p><a href="https://ffmpeg.org/"><strong>FFmpeg</strong></a>, a sofware library for working with video and audio, is already installed in RStudio Cloud. If working on your own computer, you will need to follow the instructions on the <a href="software.html">software</a> page to install FFmpeg.</p><p>Here is the GIF:</p><p><img src="img/nations.gif" alt=""></p><p>And here is the video:</p><div class="embed-responsive embed-responsive-16by9"><br>    <iframe class="embed-responsive-item" src="img/nations.mp4"></iframe><br></div><h3 id="make-a-cumulative-animation-of-historical-global-average-temperature"><a name="make-a-cumulative-animation-of-historical-global-average-temperature" href="#make-a-cumulative-animation-of-historical-global-average-temperature"></a>Make a cumulative animation of historical global average temperature</h3><p>For the Gapminder-style video, we displayed only the data for the year in question in each frame. In some cases, however, you may want to animate by adding data with each frame, and leaving the previously added data in place.</p><p>We will explore that now by making animations similar the dot-and-line chart in <a href="https://www.facebook.com/BuzzFeedScience/videos/753675331429028/">this video</a>.</p><p>Here is the code to make a static version of the chart:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load data
warming &amp;lt;- read_csv(&quot;animations-r/warming.csv&quot;)

# draw chart
warming_plot &amp;lt;- ggplot(warming, aes(x = year, y = value)) +
  geom_line(colour=&quot;black&quot;) +
  geom_point(shape = 21, colour = &quot;black&quot;, aes(fill = value), size=5, stroke=1) +
  scale_x_continuous(limits = c(1880,2017)) +
  scale_y_continuous(limits = c(-0.5,1)) +
  scale_fill_distiller(palette = &quot;RdYlBu&quot;, limits = c(-1,1), guide = FALSE) +
  xlab(&quot;&quot;) +
  ylab(&quot;Difference from 1900-2000 (ºC)&quot;) +
  theme_minimal(base_size = 16, base_family = &quot;Georgia&quot;)
</code></pre>"><span class="hljs-comment"># load data</span>
warming &lt;- read_csv(<span class="hljs-string">"animations-r/warming.csv"</span>)

<span class="hljs-comment"># draw chart</span>
warming_plot &lt;- ggplot(warming, aes(x = year, y = value)) +
  geom_line(colour=<span class="hljs-string">"black"</span>) +
  geom_point(shape = <span class="hljs-number">21</span>, colour = <span class="hljs-string">"black"</span>, aes(fill = value), size=<span class="hljs-number">5</span>, stroke=<span class="hljs-number">1</span>) +
  scale_x_continuous(limits = c(<span class="hljs-number">1880</span>,<span class="hljs-number">2017</span>)) +
  scale_y_continuous(limits = c(-<span class="hljs-number">0.5</span>,<span class="hljs-number">1</span>)) +
  scale_fill_distiller(palette = <span class="hljs-string">"RdYlBu"</span>, limits = c(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>), guide = <span class="hljs-literal">FALSE</span>) +
  xlab(<span class="hljs-string">""</span>) +
  ylab(<span class="hljs-string">"Difference from 1900-2000 (ºC)"</span>) +
  theme_minimal(base_size = <span class="hljs-number">16</span>, base_family = <span class="hljs-string">"Georgia"</span>)
</code></pre><p>This should be the result:</p><p><img src="img/animations_r_1.png" alt=""></p><p>The file <code>warming.csv</code> contains the fields <code>year</code> and <code>value</code>, the latter being the global annual average temperature, compared to the 1900-2000 average.</p><p>As this is a dot-and-line chart, it includes both <code>geom_line</code> and <code>geom_point</code> layers. Notice that the <code>geom_point</code> function also defines a numbered <code>shape</code>: <code>21</code> is a circle with a filled area, see <a href="http://www.cookbook-r.com/Graphs/Shapes_and_line_types/">here</a> for other options. By using this shape, we can set the outline <code>color</code> to black and then use an <code>aes</code> mapping to fill it with color, according to the temperature <code>value</code>.</p><p>The code uses <code>scale_fill_distiller</code> to use a ColorBrewer palette running from cool blues, through neutral yellows, to warm reds, applying them across a range of values from -1 to +1.</p><p>Again we can animate this data using <strong>gganimate</strong>:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># draw chart
warming_plot &amp;lt;- ggplot(warming, aes(x = year, y = value)) +
  geom_line(colour = &quot;black&quot;) +
  geom_point(shape = 21, colour = &quot;black&quot;, aes(fill = value), size = 5, stroke = 1) +
  scale_x_continuous(limits = c(1880,2017)) +
  scale_y_continuous(limits = c(-0.5,1)) +
  scale_fill_distiller(palette = &quot;RdYlBu&quot;, limits = c(-1,1), guide = FALSE) +
  xlab(&quot;&quot;) +
  ylab(&quot;Difference from 1900-2000 (ºC)&quot;) +
  theme_minimal(base_size = 16, base_family = &quot;Georgia&quot;) +
  # gganimate code
  transition_reveal(id = 1, along = year)

# save as a GIF
animate(warming_plot, fps = 10, end_pause = 30, width = 750, height = 450)
anim_save(&quot;warming.gif&quot;)
</code></pre>"><span class="hljs-comment"># draw chart</span>
warming_plot &lt;- ggplot(warming, aes(x = year, y = value)) +
  geom_line(colour = <span class="hljs-string">"black"</span>) +
  geom_point(shape = <span class="hljs-number">21</span>, colour = <span class="hljs-string">"black"</span>, aes(fill = value), size = <span class="hljs-number">5</span>, stroke = <span class="hljs-number">1</span>) +
  scale_x_continuous(limits = c(<span class="hljs-number">1880</span>,<span class="hljs-number">2017</span>)) +
  scale_y_continuous(limits = c(-<span class="hljs-number">0.5</span>,<span class="hljs-number">1</span>)) +
  scale_fill_distiller(palette = <span class="hljs-string">"RdYlBu"</span>, limits = c(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>), guide = <span class="hljs-literal">FALSE</span>) +
  xlab(<span class="hljs-string">""</span>) +
  ylab(<span class="hljs-string">"Difference from 1900-2000 (ºC)"</span>) +
  theme_minimal(base_size = <span class="hljs-number">16</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  <span class="hljs-comment"># gganimate code</span>
  transition_reveal(id = <span class="hljs-number">1</span>, along = year)

<span class="hljs-comment"># save as a GIF</span>
animate(warming_plot, fps = <span class="hljs-number">10</span>, end_pause = <span class="hljs-number">30</span>, width = <span class="hljs-number">750</span>, height = <span class="hljs-number">450</span>)
anim_save(<span class="hljs-string">"warming.gif"</span>)
</code></pre><h4 id="how-the-gganimate-code-works"><a name="how-the-gganimate-code-works" href="#how-the-gganimate-code-works"></a>How the gganimate code works</h4><ul>
<li><code>transition_reveal</code>. This keeps the previously revealed data in place as each value for the <code>along</code> time variable is added to the chart.</li></ul><p>The default behavior for <code>transition_reveal</code> however, reveals the lines, but only plots the point for the current frame:</p><p><img src="img/warming.gif" alt=""></p><p>To create a cumulative animation of points, use code like this:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># draw chart
warming_points &amp;lt;- ggplot(warming, aes(x = year, y = value)) +
  geom_point(shape = 21, colour = &quot;black&quot;, aes(fill = value), size=5, stroke=1) +
  scale_x_continuous(limits = c(1880,2017)) +
  scale_y_continuous(limits = c(-0.5,1)) +
  scale_fill_distiller(palette = &quot;RdYlBu&quot;, limits = c(-1,1), guide = FALSE) +
  xlab(&quot;&quot;) +
  ylab(&quot;Difference from 1900-2000 (ºC)&quot;) +
  theme_minimal(base_size = 16, base_family = &quot;Georgia&quot;) +
  # gganimate code
  transition_time(year) +
  shadow_mark()

# save as a GIF
animate(warming_points, fps = 10, end_pause = 30, width = 750, height = 450)
anim_save(&quot;warming_points.gif&quot;)
</code></pre>"><span class="hljs-comment"># draw chart</span>
warming_points &lt;- ggplot(warming, aes(x = year, y = value)) +
  geom_point(shape = <span class="hljs-number">21</span>, colour = <span class="hljs-string">"black"</span>, aes(fill = value), size=<span class="hljs-number">5</span>, stroke=<span class="hljs-number">1</span>) +
  scale_x_continuous(limits = c(<span class="hljs-number">1880</span>,<span class="hljs-number">2017</span>)) +
  scale_y_continuous(limits = c(-<span class="hljs-number">0.5</span>,<span class="hljs-number">1</span>)) +
  scale_fill_distiller(palette = <span class="hljs-string">"RdYlBu"</span>, limits = c(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>), guide = <span class="hljs-literal">FALSE</span>) +
  xlab(<span class="hljs-string">""</span>) +
  ylab(<span class="hljs-string">"Difference from 1900-2000 (ºC)"</span>) +
  theme_minimal(base_size = <span class="hljs-number">16</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  <span class="hljs-comment"># gganimate code</span>
  transition_time(year) +
  shadow_mark()

<span class="hljs-comment"># save as a GIF</span>
animate(warming_points, fps = <span class="hljs-number">10</span>, end_pause = <span class="hljs-number">30</span>, width = <span class="hljs-number">750</span>, height = <span class="hljs-number">450</span>)
anim_save(<span class="hljs-string">"warming_points.gif"</span>)
</code></pre><p><code>shadow_mark</code> retains the data from previous frames.</p><p><img src="img/warming_points.gif" alt=""></p><h3 id="make-an-animation-that-switches-between-a-simulation-of-human-effects-on-global-average-emperature,-and-natural-ones"><a name="make-an-animation-that-switches-between-a-simulation-of-human-effects-on-global-average-emperature,-and-natural-ones" href="#make-an-animation-that-switches-between-a-simulation-of-human-effects-on-global-average-emperature,-and-natural-ones"></a>Make an animation that switches between a simulation of human effects on global average emperature, and natural ones</h3><p>Looped animations can also be used to switch between different states, or filtered views of the data. To illustrate this we will load the NASA data showing a simulation from climate models of how the global average temperature would have changed under the influence of natural events, such as variation in radiation from the Sun and the cooling effect of soot from volcanoes, compared to human influences, mostly emissions of carbon dioxide and other greenhouse gases.</p><p>This code will load the data and make the animation:</p><pre class="r hljs"><code class="R" data-origin="<pre><code class=&quot;R&quot;># load data
simulations &amp;lt;- read_csv(&quot;animations-r/simulations.csv&quot;)

# draw chart
simulations_plot &amp;lt;- ggplot(simulations, aes(x=year, y=value, color = value)) +
  geom_line(size = 1) +
  scale_y_continuous(limits = c(-0.6,0.75)) +
  scale_colour_distiller(palette = &quot;RdYlBu&quot;, limits = c(-1,1), guide = FALSE) +
  ylab(&quot;Diff. from 1900-2000 average (ºC)&quot;) +
  xlab(&quot;&quot;) +
  theme_dark(base_size = 16, base_family = &quot;Georgia&quot;) +
  #gganimate code
  ggtitle(&quot;{closest_state}&quot;) +
  transition_states(
    type,
    transition_length = 0.5,
    state_length = 2
  ) +
  ease_aes(&quot;sine-in-out&quot;)

# save as a GIF
animate(simulations_plot, fps = 10, width = 750, height = 450)
anim_save(&quot;simulations.gif&quot;)
</code></pre>"><span class="hljs-comment"># load data</span>
simulations &lt;- read_csv(<span class="hljs-string">"animations-r/simulations.csv"</span>)

<span class="hljs-comment"># draw chart</span>
simulations_plot &lt;- ggplot(simulations, aes(x=year, y=value, color = value)) +
  geom_line(size = <span class="hljs-number">1</span>) +
  scale_y_continuous(limits = c(-<span class="hljs-number">0.6</span>,<span class="hljs-number">0.75</span>)) +
  scale_colour_distiller(palette = <span class="hljs-string">"RdYlBu"</span>, limits = c(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>), guide = <span class="hljs-literal">FALSE</span>) +
  ylab(<span class="hljs-string">"Diff. from 1900-2000 average (ºC)"</span>) +
  xlab(<span class="hljs-string">""</span>) +
  theme_dark(base_size = <span class="hljs-number">16</span>, base_family = <span class="hljs-string">"Georgia"</span>) +
  <span class="hljs-comment">#gganimate code</span>
  ggtitle(<span class="hljs-string">"{closest_state}"</span>) +
  transition_states(
    type,
    transition_length = <span class="hljs-number">0.5</span>,
    state_length = <span class="hljs-number">2</span>
  ) +
  ease_aes(<span class="hljs-string">"sine-in-out"</span>)

<span class="hljs-comment"># save as a GIF</span>
animate(simulations_plot, fps = <span class="hljs-number">10</span>, width = <span class="hljs-number">750</span>, height = <span class="hljs-number">450</span>)
anim_save(<span class="hljs-string">"simulations.gif"</span>)
</code></pre><h4 id="how-the-gganimate-code-works"><a name="how-the-gganimate-code-works" href="#how-the-gganimate-code-works"></a>How the gganimate code works</h4><ul>
<li><p><code>transition_state</code>. This switches between different filtered states of the data, here defined by the variable <code>type</code>. <code>transition_length</code> is the length of the transition in seconds, and <code>state_length</code> is the pause at each state, again in seconds.</p>
</li><li><p><code>ease_aes</code> With a state transition animation, using options that  vary the speed of the transition, with a slower start and finish than the middle section, give a more visually pleaseing effect. Try <code>"cubic-in-out"</code> or <code>"sine_in_out"</code></p>
</li><li>Using <code>"{closest_state}"</code> in the <code>ggtitle</code> function displays the appropriate value for the variable used to define the states, here <code>type</code>.</li></ul><p>The GIF should look like this:</p><p><img src="img/simulations.gif" alt=""></p><h3 id="further-reading/resources"><a name="further-reading/resources" href="#further-reading/resources"></a>Further reading/resources</h3><p><a href="https://gganimate.com/">gganimate website</a></p>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
